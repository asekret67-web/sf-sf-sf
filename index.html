<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="mobile-web-app-capable" content="yes">
<meta name="theme-color" content="#0a0a0a">
<title>Shadow Fight 2 - –ì–ª–∞–≤–∞ 1</title>
<script src="https://telegram.org/js/telegram-web-app.js"></script>
<!-- AdsGram Script -->
<script async src="https://api.adsgram.ai/adsgram.min.js"></script>
<style>
:root {
--bg-color: #0a0a0a;
--panel-color: #1a1a2e;
--accent: #ff9800;
--text: #ffffff;
--green: #4caf50;
--red: #f44336;
--blue: #2196F3;
--purple: #9c27b0;
--dev-bg: #1a0a2e;
--dev-accent: #e040fb;
--diamond: #00bcd4;
--xp-gold: #ffd700;
}
* {
margin: 0;
padding: 0;
box-sizing: border-box;
user-select: none;
-webkit-tap-highlight-color: transparent;
-webkit-touch-callout: none;
}
body {
font-family: 'Roboto', sans-serif;
background: var(--bg-color);
color: var(--text);
height: 100vh;
overflow: hidden;
display: flex;
flex-direction: column;
touch-action: manipulation;
transition: background-image 0.5s ease-in-out;
background-size: cover;
background-position: center;
background-repeat: no-repeat;
background-attachment: fixed;
-webkit-overflow-scrolling: touch;
}
body::before {
content: '';
position: fixed;
top: 0; left: 0; width: 100%; height: 100%;
background: rgba(0, 0, 0, 0.75);
z-index: -1;
pointer-events: none;
}
.loading-screen {
position: fixed;
top: 0; left: 0; width: 100%; height: 100%;
background: linear-gradient(135deg, #0a0a0a 0%, #1a1a2e 100%);
display: flex;
flex-direction: column;
align-items: center;
justify-content: center;
z-index: 9999;
transition: opacity 0.5s ease;
padding: 20px;
}
.loading-screen.hidden {
opacity: 0;
pointer-events: none;
}
.loading-logo {
font-size: 64px;
margin-bottom: 20px;
animation: pulse 1.5s infinite;
}
.loading-text {
font-size: 28px;
color: var(--accent);
margin-bottom: 30px;
text-transform: uppercase;
letter-spacing: 3px;
}
.loading-bar-bg {
width: 300px;
height: 10px;
background: rgba(255,255,255,0.1);
border-radius: 5px;
overflow: hidden;
}
.loading-bar-fill {
height: 100%;
background: linear-gradient(90deg, var(--accent), #ff6b6b);
width: 0%;
transition: width 0.3s ease;
box-shadow: 0 0 20px rgba(255, 152, 0, 0.5);
}
.loading-disclaimer {
position: absolute;
bottom: 30px;
left: 50%;
transform: translateX(-50%);
font-size: 11px;
color: #666;
text-align: center;
max-width: 90%;
line-height: 1.4;
padding: 10px;
background: rgba(0,0,0,0.3);
border-radius: 8px;
}
.version-badge {
position: absolute;
top: 20px;
right: 20px;
background: rgba(255, 152, 0, 0.2);
border: 1px solid var(--accent);
color: var(--accent);
padding: 5px 12px;
border-radius: 15px;
font-size: 12px;
font-weight: bold;
}
@keyframes pulse {
0%, 100% { transform: scale(1); opacity: 1; }
50% { transform: scale(1.1); opacity: 0.7; }
}
.screen {
display: none;
flex: 1;
overflow-y: auto;
padding: 20px;
padding-bottom: 80px;
animation: fadeIn 0.3s;
-webkit-overflow-scrolling: touch;
}
.screen.active { display: block; }
@keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
.top-bar {
width: 100%;
padding: 15px 20px;
background: rgba(0,0,0,0.85);
display: flex;
justify-content: space-between;
align-items: center;
backdrop-filter: blur(10px);
z-index: 10;
border-bottom: 2px solid rgba(255,255,255,0.1);
position: fixed;
top: 0;
left: 0;
}
.currency-display {
display: flex;
gap: 15px;
align-items: center;
}
.gold-display {
font-size: 1.2rem;
font-weight: bold;
color: #ffd700;
text-shadow: 2px 2px 4px #000;
display: flex;
align-items: center;
gap: 5px;
}
.diamond-display {
font-size: 1.2rem;
font-weight: bold;
color: var(--diamond);
text-shadow: 2px 2px 4px #000;
display: flex;
align-items: center;
gap: 5px;
}
.xp-display {
font-size: 0.9rem;
font-weight: bold;
color: var(--xp-gold);
text-shadow: 2px 2px 4px #000;
display: flex;
align-items: center;
gap: 5px;
}
.energy-container {
flex: 1;
max-width: 300px;
margin: 0 20px;
}
.energy-bar-bg {
width: 100%;
height: 28px;
background: #222;
border-radius: 14px;
overflow: hidden;
border: 2px solid #444;
position: relative;
box-shadow: 0 2px 10px rgba(0,0,0,0.5);
}
.energy-bar-fill {
height: 100%;
background: linear-gradient(90deg, #00e5ff, #00b8d4);
width: 100%;
transition: width 0.3s ease;
box-shadow: 0 0 15px rgba(0, 229, 255, 0.5);
}
.energy-text {
position: absolute;
width: 100%;
text-align: center;
top: 50%;
transform: translateY(-50%);
font-size: 14px;
font-weight: bold;
text-shadow: 2px 2px 4px #000;
z-index: 2;
}
.dev-btn {
background: rgba(156, 39, 176, 0.3);
border: 1px solid var(--purple);
color: #fff;
width: 40px;
height: 40px;
border-radius: 50%;
cursor: pointer;
font-size: 18px;
backdrop-filter: blur(5px);
min-width: 40px;
}
#screen-battle {
display: flex;
flex-direction: column;
align-items: center;
justify-content: flex-start;
padding: 0;
position: relative;
padding-top: 70px;
}
.boss-info {
width: 90%;
padding: 15px;
text-align: center;
background: rgba(0,0,0,0.6);
backdrop-filter: blur(5px);
border-radius: 12px;
margin-bottom: 10px;
}
.enemy-name {
font-size: 1.5rem;
font-weight: bold;
margin-bottom: 10px;
text-transform: uppercase;
letter-spacing: 2px;
text-shadow: 2px 2px 4px #000;
}
.round-info {
font-size: 1rem;
color: var(--accent);
margin-bottom: 10px;
text-shadow: 2px 2px 4px #000;
}
.hp-bar-bg {
width: 100%;
height: 25px;
background: #222;
border-radius: 12px;
overflow: hidden;
margin: 10px auto;
position: relative;
border: 2px solid #444;
box-shadow: 0 2px 10px rgba(0,0,0,0.5);
}
.hp-bar-fill {
height: 100%;
background: linear-gradient(90deg, #ff1744, #f50057);
width: 100%;
transition: width 0.1s linear;
box-shadow: 0 0 10px rgba(255, 23, 68, 0.5);
}
.hp-text {
position: absolute;
width: 100%;
text-align: center;
top: 2px;
font-size: 14px;
font-weight: bold;
text-shadow: 2px 2px 4px #000;
z-index: 2;
}
.fight-area {
width: 100%;
display: flex;
flex-direction: column;
align-items: center;
justify-content: flex-start;
position: relative;
padding: 10px 20px;
flex: 1;
margin-top: -20px;
}
.char-container {
position: relative;
width: 280px;
height: 320px;
display: flex;
align-items: center;
justify-content: center;
cursor: pointer;
transition: transform 0.1s;
margin-top: 10px;
}
.char-container:active {
transform: scale(0.95);
}
.character-img {
max-height: 100%;
max-width: 100%;
filter: drop-shadow(0 0 20px rgba(0,0,0,0.8));
transition: all 0.1s;
}
.character-img.hit {
animation: hitShake 0.4s;
filter: brightness(1.5) drop-shadow(0 0 30px rgba(255,255,255,0.5));
}
.character-img.crit-hit {
animation: critHitShake 0.6s;
filter: brightness(2) drop-shadow(0 0 40px rgba(255, 215, 0, 0.8));
}
@keyframes hitShake {
0%, 100% { transform: translateX(0) rotate(0deg); }
20% { transform: translateX(-15px) rotate(-5deg); }
40% { transform: translateX(15px) rotate(5deg); }
60% { transform: translateX(-10px) rotate(-3deg); }
80% { transform: translateX(10px) rotate(3deg); }
}
@keyframes critHitShake {
0%, 100% { transform: translateX(0) rotate(0deg) scale(1); }
20% { transform: translateX(-20px) rotate(-10deg) scale(1.1); }
40% { transform: translateX(20px) rotate(10deg) scale(1.1); }
60% { transform: translateX(-15px) rotate(-5deg) scale(1.05); }
80% { transform: translateX(15px) rotate(5deg) scale(1.05); }
}
.char-description {
margin-top: 10px;
padding: 10px;
background: rgba(0,0,0,0.7);
border-radius: 8px;
text-align: center;
max-width: 300px;
border: 1px solid rgba(255,255,255,0.2);
backdrop-filter: blur(5px);
}
.char-desc-text {
font-size: 13px;
color: #eee;
line-height: 1.4;
font-style: italic;
}
.damage-popup {
position: absolute;
font-weight: bold;
font-size: 32px;
color: #fff;
pointer-events: none;
animation: damageFloat 1s forwards;
text-shadow: 3px 3px 0 #000, 0 0 20px rgba(255,255,255,0.5);
z-index: 100;
}
.damage-popup.crit {
color: #ffeb3b;
font-size: 48px;
text-shadow: 0 0 30px #ff0, 3px 3px 0 #000;
animation: critBounce 1s forwards;
}
@keyframes damageFloat {
0% { opacity: 1; transform: translateY(0) scale(1); }
100% { opacity: 0; transform: translateY(-120px) scale(1.3); }
}
@keyframes critBounce {
0% { opacity: 1; transform: translateY(0) scale(0.5) rotate(-10deg); }
30% { transform: translateY(-30px) scale(1.5) rotate(5deg); }
100% { opacity: 0; transform: translateY(-150px) scale(1) rotate(0deg); }
}
/* –≠–ö–†–ê–ù –ü–û–ë–ï–î–´ */
.victory-screen {
position: fixed;
top: 0; left: 0; width: 100%; height: 100%;
background: rgba(0,0,0,0.95);
z-index: 5000;
display: none;
flex-direction: column;
align-items: center;
justify-content: center;
}
.victory-screen.active {
display: flex;
}
.victory-text {
font-size: 64px;
font-weight: bold;
color: #ffd700;
text-shadow: 0 0 30px #ff0, 0 0 60px #ff0;
animation: victoryPulse 1s infinite;
margin-bottom: 30px;
}
.victory-enemy-name {
font-size: 28px;
color: #fff;
margin-bottom: 20px;
}
.victory-next-btn {
background: linear-gradient(135deg, #ff9800, #f57c00);
color: #fff;
border: none;
padding: 20px 50px;
border-radius: 15px;
font-size: 20px;
font-weight: bold;
cursor: pointer;
margin-top: 30px;
box-shadow: 0 0 30px rgba(255, 152, 0, 0.5);
transition: all 0.3s;
}
.victory-next-btn:hover {
transform: scale(1.05);
box-shadow: 0 0 50px rgba(255, 152, 0, 0.8);
}
.victory-next-btn:active {
transform: scale(0.95);
}
@keyframes victoryPulse {
0%, 100% { transform: scale(1); }
50% { transform: scale(1.1); }
}
.transition-effect {
position: fixed;
top: 0; left: 0; width: 100%; height: 100%;
background: #000;
z-index: 1000;
opacity: 0;
pointer-events: none;
transition: opacity 0.3s;
}
.transition-effect.active {
opacity: 1;
}
#screen-shop, #screen-profile, #screen-promo, #screen-dev, #screen-roulette {
background: rgba(26, 26, 46, 0.95);
backdrop-filter: blur(10px);
padding-top: 80px;
}
.shop-item {
background: rgba(255,255,255,0.05);
padding: 15px;
margin-bottom: 10px;
border-radius: 10px;
display: flex;
justify-content: space-between;
align-items: center;
border: 1px solid rgba(255,255,255,0.1);
}
.btn-buy {
background: var(--green); color: #fff; border: none; padding: 10px 20px; border-radius: 8px; font-weight: bold; cursor: pointer; min-width: 100px;
transition: all 0.2s;
}
.btn-buy:hover:not(:disabled) { transform: translateY(-2px); box-shadow: 0 5px 15px rgba(76, 175, 80, 0.4); }
.btn-buy:disabled { background: #444; cursor: not-allowed; opacity: 0.5; }
.btn-buy.purchased {
background: #4caf50;
cursor: default;
}
.btn-buy.purchased::after {
content: ' ‚úì';
}
.btn-reset {
background: var(--red); color: #fff; border: none; padding: 15px 30px; border-radius: 12px; font-weight: bold; cursor: pointer; width: 100%; margin-top: 10px;
transition: all 0.2s;
font-size: 16px;
}
.btn-reset:hover { transform: translateY(-2px); box-shadow: 0 5px 20px rgba(244, 67, 54, 0.4); }
.btn-dev {
background: linear-gradient(135deg, #e040fb 0%, #aa00ff 100%);
color: #fff; border: none; padding: 15px 30px; border-radius: 12px; font-weight: bold; cursor: pointer; width: 100%; margin-top: 10px;
transition: all 0.2s;
font-size: 16px;
box-shadow: 0 4px 15px rgba(224, 64, 251, 0.4);
}
.btn-dev:hover { transform: translateY(-2px); box-shadow: 0 6px 20px rgba(224, 64, 251, 0.6); }
.btn-dev-danger {
background: linear-gradient(135deg, #f44336 0%, #d32f2f 100%);
box-shadow: 0 4px 15px rgba(244, 67, 54, 0.4);
}
.ad-btn {
width: 100%;
padding: 18px;
background: linear-gradient(45deg, #2196F3, #21CBF3);
color: white;
border: none;
border-radius: 12px;
font-size: 16px;
font-weight: bold;
margin-bottom: 20px;
cursor: pointer;
display: flex;
align-items: center;
justify-content: center;
gap: 10px;
box-shadow: 0 4px 15px rgba(33, 150, 243, 0.3);
}
.ad-btn:active { transform: scale(0.98); }
.stat-box {
background: rgba(0,0,0,0.4);
padding: 20px;
border-radius: 12px;
margin-bottom: 15px;
border: 1px solid rgba(255,255,255,0.1);
}
.stat-row { display: flex; justify-content: space-between; margin-bottom: 10px; padding-bottom: 10px; border-bottom: 1px solid rgba(255,255,255,0.1); }
.stat-row:last-child { border: none; margin: 0; padding: 0; }
.achievement-item {
background: rgba(255,255,255,0.05);
padding: 12px;
margin-bottom: 8px;
border-radius: 8px;
border-left: 4px solid #444;
transition: all 0.3s;
}
.achievement-item.unlocked {
border-left-color: #4caf50;
background: rgba(76, 175, 80, 0.1);
}
.achievement-item.locked {
opacity: 0.6;
}
.achievement-progress {
font-size: 11px;
color: #888;
margin-top: 5px;
}
.bottom-nav {
position: fixed;
bottom: 0; left: 0; width: 100%;
height: 70px;
background: rgba(26, 26, 46, 0.95);
display: flex;
justify-content: space-around;
align-items: center;
border-top: 2px solid #333;
z-index: 100;
backdrop-filter: blur(10px);
}
.nav-btn {
background: none; border: none; color: #888;
font-size: 11px; display: flex; flex-direction: column; align-items: center; gap: 5px;
cursor: pointer; width: 20%; padding: 10px;
transition: all 0.2s;
}
.nav-btn.active { color: var(--accent); }
.nav-icon { font-size: 24px; }
.nav-btn:active { background: rgba(255,255,255,0.1); }
.toast {
position: fixed; top: 100px; left: 50%; transform: translateX(-50%);
background: rgba(0,0,0,0.9); color: #fff; padding: 12px 24px;
border-radius: 25px; z-index: 1000; opacity: 0; transition: 0.3s; pointer-events: none;
white-space: nowrap; border: 1px solid rgba(255,255,255,0.2);
box-shadow: 0 5px 20px rgba(0,0,0,0.5);
}
.toast.show { opacity: 1; top: 120px; }
.audio-controls {
position: fixed;
top: 120px;
right: 10px;
z-index: 50;
display: flex;
flex-direction: column;
gap: 10px;
}
.audio-btn {
background: rgba(0,0,0,0.6);
border: none;
color: #fff;
width: 40px;
height: 40px;
border-radius: 50%;
cursor: pointer;
font-size: 18px;
backdrop-filter: blur(5px);
}
.save-indicator {
position: fixed;
bottom: 80px;
right: 10px;
background: rgba(0,0,0,0.6);
color: #4caf50;
padding: 5px 10px;
border-radius: 15px;
font-size: 12px;
opacity: 0;
transition: opacity 0.3s;
z-index: 50;
}
.save-indicator.show {
opacity: 1;
}
.modal {
display: none;
position: fixed;
top: 0; left: 0; width: 100%; height: 100%;
background: rgba(0,0,0,0.9);
z-index: 2000;
justify-content: center;
align-items: center;
padding: 20px;
}
.modal-content {
background: #1a1a2e;
padding: 30px;
border-radius: 20px;
max-width: 400px;
width: 100%;
text-align: center;
border: 2px solid #f44336;
}
.modal-buttons {
display: flex;
gap: 10px;
margin-top: 20px;
}
.modal-btn {
flex: 1;
padding: 12px;
border: none;
border-radius: 8px;
font-weight: bold;
cursor: pointer;
}
.modal-btn.confirm {
background: #f44336;
color: #fff;
}
.modal-btn.cancel {
background: #444;
color: #fff;
}
.promo-input-container {
margin: 20px 0;
text-align: center;
}
.promo-input {
width: 80%;
padding: 15px;
background: rgba(255,255,255,0.1);
border: 2px solid var(--purple);
border-radius: 10px;
color: #fff;
font-size: 16px;
text-align: center;
margin-bottom: 10px;
}
.promo-input:focus {
outline: none;
border-color: var(--accent);
box-shadow: 0 0 15px rgba(156, 39, 176, 0.5);
}
.btn-promo {
background: var(--purple);
color: #fff;
border: none;
padding: 15px 30px;
border-radius: 10px;
font-weight: bold;
cursor: pointer;
font-size: 16px;
}
.dev-section {
background: rgba(224, 64, 251, 0.1);
border: 1px solid var(--dev-accent);
padding: 15px;
border-radius: 10px;
margin: 15px 0;
}
.dev-section h3 {
color: var(--dev-accent);
margin-bottom: 10px;
text-shadow: 0 0 10px rgba(224, 64, 251, 0.5);
}
.dev-input {
width: 100%;
padding: 10px;
background: rgba(0,0,0,0.3);
border: 1px solid var(--dev-accent);
border-radius: 5px;
color: #fff;
font-size: 14px;
margin: 5px 0;
}
.dev-input:focus {
outline: none;
border-color: #fff;
box-shadow: 0 0 10px rgba(224, 64, 251, 0.5);
}
.char-select-grid {
display: grid;
grid-template-columns: repeat(3, 1fr);
gap: 10px;
margin: 10px 0;
}
.char-select-btn {
background: rgba(224, 64, 251, 0.2);
border: 1px solid var(--dev-accent);
color: #fff;
padding: 10px;
border-radius: 5px;
cursor: pointer;
font-size: 12px;
}
.char-select-btn.active {
background: var(--dev-accent);
box-shadow: 0 0 15px rgba(224, 64, 251, 0.5);
}
.promo-shop-item {
background: rgba(156, 39, 176, 0.2);
border: 1px solid var(--purple);
padding: 15px;
margin-bottom: 10px;
border-radius: 10px;
display: flex;
justify-content: space-between;
align-items: center;
}
.btn-promo-buy {
background: var(--purple);
color: #fff;
border: none;
padding: 10px 20px;
border-radius: 8px;
font-weight: bold;
cursor: pointer;
}
.btn-promo-buy.purchased {
background: #4caf50;
cursor: default;
}
.ad-modal {
display: none;
position: fixed;
top: 0; left: 0; width: 100%; height: 100%;
background: rgba(0,0,0,0.95);
z-index: 3000;
justify-content: center;
align-items: center;
flex-direction: column;
padding: 20px;
}
.ad-modal.active {
display: flex;
}
.ad-content {
max-width: 500px;
width: 100%;
text-align: center;
}
.ad-image {
max-width: 100%;
max-height: 300px;
border-radius: 10px;
margin: 20px 0;
box-shadow: 0 0 30px rgba(224, 64, 251, 0.5);
cursor: pointer;
transition: transform 0.3s;
}
.ad-image:hover {
transform: scale(1.02);
}
.ad-video {
max-width: 100%;
max-height: 300px;
border-radius: 10px;
margin: 20px 0;
}
.ad-text {
font-size: 18px;
color: #fff;
margin: 20px 0;
line-height: 1.5;
}
.ad-timer {
font-size: 24px;
color: var(--dev-accent);
margin: 20px 0;
font-weight: bold;
}
.ad-close-btn {
background: var(--dev-accent);
color: #fff;
border: none;
padding: 15px 40px;
border-radius: 10px;
font-weight: bold;
font-size: 16px;
cursor: pointer;
margin-top: 20px;
}
.ad-close-btn:disabled {
background: #444;
cursor: not-allowed;
}
.ad-counter {
font-size: 14px;
color: #888;
margin-top: 10px;
}
.prestige-chapter-modal {
display: none;
position: fixed;
top: 0; left: 0; width: 100%; height: 100%;
background: rgba(0,0,0,0.95);
z-index: 3000;
justify-content: center;
align-items: center;
padding: 20px;
}
.prestige-chapter-modal.active {
display: flex;
}
.prestige-chapter-content {
background: linear-gradient(135deg, #1a0a2e 0%, #2d1b4e 100%);
padding: 40px;
border-radius: 20px;
max-width: 500px;
width: 100%;
text-align: center;
border: 3px solid var(--dev-accent);
box-shadow: 0 0 50px rgba(224, 64, 251, 0.5);
}
.prestige-chapter-title {
font-size: 32px;
color: var(--dev-accent);
margin-bottom: 20px;
text-shadow: 0 0 20px rgba(224, 64, 251, 0.8);
}
.prestige-chapter-subtitle {
font-size: 24px;
color: #ffd700;
margin-bottom: 30px;
text-shadow: 0 0 15px rgba(255, 215, 0, 0.8);
}
.prestige-chapter-text {
font-size: 16px;
color: #ccc;
margin-bottom: 30px;
line-height: 1.6;
}
.prestige-chapter-buttons {
display: flex;
gap: 15px;
justify-content: center;
}
.prestige-chapter-btn {
flex: 1;
padding: 15px 30px;
border: none;
border-radius: 10px;
font-weight: bold;
font-size: 16px;
cursor: pointer;
transition: all 0.3s;
}
.prestige-chapter-btn.prestige {
background: linear-gradient(135deg, #e040fb 0%, #aa00ff 100%);
color: #fff;
box-shadow: 0 4px 20px rgba(224, 64, 251, 0.5);
}
.prestige-chapter-btn.later {
background: #444;
color: #fff;
}
.prestige-chapter-btn:hover {
transform: translateY(-3px);
}
.roulette-container {
text-align: center;
padding: 20px;
}
.roulette-cost {
font-size: 16px;
color: var(--diamond);
margin-bottom: 10px;
}
.slot-machine {
display: flex;
justify-content: center;
gap: 10px;
margin: 20px auto;
padding: 20px;
background: linear-gradient(135deg, #1a1a2e, #2d1b4e);
border-radius: 15px;
border: 3px solid var(--accent);
box-shadow: 0 0 30px rgba(255, 152, 0, 0.5);
}
.slot-reel {
width: 80px;
height: 100px;
background: #fff;
border-radius: 10px;
display: flex;
align-items: center;
justify-content: center;
font-size: 48px;
border: 3px solid #333;
overflow: hidden;
position: relative;
}
.slot-reel.spinning {
animation: slotSpin 0.1s infinite;
}
@keyframes slotSpin {
0% { transform: translateY(-5px); }
50% { transform: translateY(5px); }
100% { transform: translateY(-5px); }
}
.roulette-btn {
background: linear-gradient(135deg, #ff9800, #f57c00);
color: #fff;
border: none;
padding: 15px 40px;
border-radius: 12px;
font-weight: bold;
font-size: 18px;
cursor: pointer;
margin-top: 20px;
box-shadow: 0 4px 15px rgba(255, 152, 0, 0.4);
}
.roulette-btn:disabled {
background: #444;
cursor: not-allowed;
}
.roulette-result {
font-size: 24px;
font-weight: bold;
margin-top: 20px;
min-height: 40px;
}
.roulette-prizes {
margin-top: 20px;
font-size: 12px;
color: #888;
text-align: left;
background: rgba(0,0,0,0.3);
padding: 15px;
border-radius: 10px;
}
.roulette-prizes h4 {
color: var(--accent);
margin-bottom: 10px;
}
.free-spin-info {
background: linear-gradient(135deg, #4caf50, #45a049);
padding: 10px;
border-radius: 8px;
margin-bottom: 15px;
font-size: 14px;
}
.xp-container {
background: rgba(0,0,0,0.4);
padding: 20px;
border-radius: 12px;
margin-bottom: 15px;
border: 1px solid rgba(255,255,255,0.1);
}
.xp-bar-bg {
width: 100%;
height: 20px;
background: #222;
border-radius: 10px;
overflow: hidden;
margin: 10px 0;
position: relative;
border: 2px solid #444;
}
.xp-bar-fill {
height: 100%;
background: linear-gradient(90deg, #ffd700, #ff9800);
width: 0%;
transition: width 0.5s ease;
box-shadow: 0 0 15px rgba(255, 215, 0, 0.5);
}
.xp-text {
position: absolute;
width: 100%;
text-align: center;
top: 50%;
transform: translateY(-50%);
font-size: 12px;
font-weight: bold;
text-shadow: 2px 2px 4px #000;
z-index: 2;
}
.rank-badge {
font-size: 18px;
font-weight: bold;
color: var(--xp-gold);
text-shadow: 0 0 10px rgba(255, 215, 0, 0.5);
}
.login-log {
background: rgba(0,0,0,0.6);
padding: 15px;
border-radius: 10px;
margin-bottom: 15px;
border: 1px solid var(--accent);
}
.login-log h4 {
color: var(--accent);
margin-bottom: 10px;
}
.login-log p {
font-size: 13px;
color: #ccc;
margin: 5px 0;
}
@media (max-width: 480px) {
.loading-text { font-size: 20px; }
.loading-bar-bg { width: 250px; }
.char-container { width: 240px; height: 280px; }
.top-bar { padding: 10px 15px; }
.energy-container { max-width: 200px; }
.nav-btn { font-size: 10px; }
.nav-icon { font-size: 20px; }
.bottom-nav { height: 60px; }
.dev-section { padding: 10px; }
.char-select-grid { grid-template-columns: repeat(2, 1fr); }
.countdown-number { font-size: 100px; }
.victory-text { font-size: 48px; }
.slot-reel { width: 60px; height: 80px; font-size: 36px; }
}
@media (max-width: 360px) {
.loading-text { font-size: 18px; }
.loading-bar-bg { width: 200px; }
.char-container { width: 200px; height: 240px; }
.gold-display { font-size: 1rem; }
.energy-text { font-size: 12px; }
.slot-reel { width: 50px; height: 70px; font-size: 28px; }
}
</style>
</head>
<body>
<div class="loading-screen" id="loadingScreen">
<div class="version-badge" id="versionBadge">V1.0.03</div>
<div class="loading-logo">‚öîÔ∏è</div>
<div class="loading-text">Shadow Fight 2</div>
<div class="loading-bar-bg">
<div class="loading-bar-fill" id="loadingBar"></div>
</div>
<div class="loading-disclaimer">
‚ö†Ô∏è –î–ò–°–ö–õ–ï–ô–ú–ï–†: –ò–≥—Ä–∞ —è–≤–ª—è–µ—Ç—Å—è —Ñ–∞–Ω–∞—Ç—Å–∫–∏–º –ø—Ä–æ–µ–∫—Ç–æ–º –∏ –Ω–µ —Å–≤—è–∑–∞–Ω–∞ —Å –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã–º–∏ —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞–º–∏ Shadow Fight 2. –í—Å–µ –ø—Ä–∞–≤–∞ –Ω–∞ –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—É—é –∏–≥—Ä—É –ø—Ä–∏–Ω–∞–¥–ª–µ–∂–∞—Ç Nekki. –ò–≥—Ä–∞ —Å–æ–∑–¥–∞–Ω–∞ –≤ –æ–±—Ä–∞–∑–æ–≤–∞—Ç–µ–ª—å–Ω—ã—Ö —Ü–µ–ª—è—Ö.
</div>
</div>

<!-- –≠–ö–†–ê–ù –ü–û–ë–ï–î–´ –° –ö–ù–û–ü–ö–û–ô -->
<div class="victory-screen" id="victoryScreen">
<div class="victory-text">üèÜ –ü–û–ë–ï–î–ê!</div>
<div class="victory-enemy-name" id="victoryEnemyName">–®–∏–Ω –ø–æ–≤–µ—Ä–∂–µ–Ω</div>
<button class="victory-next-btn" id="victoryNextBtn" onclick="goToNextEnemy()">‚öîÔ∏è –°–ª–µ–¥—É—é—â–∏–π –ø—Ä–æ—Ç–∏–≤–Ω–∏–∫</button>
</div>

<audio id="bgMusic" loop>
<source src="audio/background.mp3" type="audio/mpeg">
</audio>
<audio id="clickSound">
<source src="audio/click.mp3" type="audio/mpeg">
</audio>
<audio id="critSound">
<source src="audio/crit.mp3" type="audio/mpeg">
</audio>
<audio id="transitionSound">
<source src="audio/transition.mp3" type="audio/mpeg">
</audio>
<audio id="winSound">
<source src="audio/win.mp3" type="audio/mpeg">
</audio>
<audio id="fightSound">
<source src="audio/fight.mp3" type="audio/mpeg">
</audio>

<div class="transition-effect" id="transitionEffect"></div>

<div class="audio-controls">
<button class="audio-btn" onclick="toggleMusic()" id="musicBtn">üéµ</button>
<button class="audio-btn" onclick="toggleSound()" id="soundBtn">üîä</button>
</div>

<div class="save-indicator" id="saveIndicator">üíæ –°–æ—Ö—Ä–∞–Ω–µ–Ω–æ</div>

<div id="screen-battle" class="screen active">
<div class="boss-info">
<div class="enemy-name" id="enemyName">–®–∏–Ω</div>
<div class="round-info" id="roundInfo">–†–∞—É–Ω–¥ 1 –∏–∑ 2</div>
<div class="hp-bar-bg">
<div class="hp-bar-fill" id="hpFill"></div>
<div class="hp-text"><span id="hpText">3000/3000</span></div>
</div>
</div>
<div class="fight-area">
<div class="char-container" id="charContainer">
<img id="charImg" src="" class="character-img" alt="Enemy">
</div>
<div class="char-description">
<div class="char-desc-text" id="charDesc">
–ú–∞—Å—Ç–µ—Ä –±–æ–µ–≤—ã—Ö –∏—Å–∫—É—Å—Å—Ç–≤. –ë—ã—Å—Ç—Ä—ã–π –∏ –ª–æ–≤–∫–∏–π –ø—Ä–æ—Ç–∏–≤–Ω–∏–∫.
</div>
</div>
</div>
</div>

<div id="screen-shop" class="screen">
<h2 style="margin: 20px 0; text-align: center;">‚öîÔ∏è –ú–∞–≥–∞–∑–∏–Ω</h2>
<button class="ad-btn" onclick="watchAd()">
üì∫ –†–µ–∫–ª–∞–º–∞ (+500 üí∞)
</button>
<button class="ad-btn" onclick="watchAdForDiamond()" style="background: linear-gradient(45deg, #00bcd4, #0097a7);">
üíé –†–µ–∫–ª–∞–º–∞ (+1 üíé)</button>
<div class="shop-item">
<div>
<div style="font-weight: bold;">‚ö° +50 –≠–Ω–µ—Ä–≥–∏–∏</div>
<small style="color:#888">–ú–≥–Ω–æ–≤–µ–Ω–Ω–æ–µ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ</small>
</div>
<button class="btn-buy" onclick="buyEnergy()" style="background: #2196F3;">
100 üí∞
</button>
</div>
<div class="shop-item">
<div>
<div style="font-weight: bold;">‚öîÔ∏è –£—Ä–æ–Ω +1</div>
<small style="color:#888">–¢–µ–∫—É—â–∏–π: <span id="shopDmg">1</span></small>
</div>
<button class="btn-buy" id="btnBuyDmg" onclick="buyUpgrade('damage')">
<span id="costDmg">15</span> üí∞
</button>
</div>
<div class="shop-item">
<div>
<div style="font-weight: bold;">üéØ –ö—Ä–∏—Ç +1%</div>
<small style="color:#888">–¢–µ–∫—É—â–∏–π: <span id="shopCrit">5</span>%</small>
</div>
<button class="btn-buy" id="btnBuyCrit" onclick="buyUpgrade('critChance')">
<span id="costCrit">75</span> üí∞
</button>
</div>
<div class="shop-item">
<div>
<div style="font-weight: bold;">üí• –ö—Ä–∏—Ç.–£—Ä–æ–Ω +10%</div>
<small style="color:#888">–¢–µ–∫—É—â–∏–π: <span id="shopCritDmg">200</span>%</small>
</div>
<button class="btn-buy" id="btnBuyCritDmg" onclick="buyUpgrade('critDamage')">
<span id="costCritDmg">150</span> üí∞
</button>
</div>
<div class="shop-item">
<div>
<div style="font-weight: bold;">‚ö° –ú–∞–∫—Å.–≠–Ω–µ—Ä–≥–∏—è +10</div>
<small style="color:#888">–¢–µ–∫—É—â–∏–π: <span id="shopEnergy">100</span></small>
</div>
<button class="btn-buy" id="btnBuyEnergy" onclick="buyUpgrade('maxEnergy')">
<span id="costEnergy">300</span> üí∞
</button>
</div>
</div>

<div id="screen-profile" class="screen">
<h2 style="margin: 20px 0; text-align: center;">üìä –ü—Ä–æ—Ñ–∏–ª—å</h2>
<div class="login-log">
<h4>üìú –õ–æ–≥ –≤—Ö–æ–¥–∞</h4>
<p id="lastLoginLog">–ü–æ—Å–ª–µ–¥–Ω–∏–π –≤—Ö–æ–¥: –ù–∏–∫–æ–≥–¥–∞</p>
<p id="playTimeLog">–í—Ä–µ–º—è –≤ –∏–≥—Ä–µ: 0 –º–∏–Ω</p>
</div>
<div class="xp-container">
<div style="display: flex; justify-content: space-between; align-items: center;">
<span class="rank-badge" id="rankBadge">–ù–æ–≤–∏—á–æ–∫</span>
<span style="color: var(--xp-gold);">–£—Ä–æ–≤–µ–Ω—å <span id="levelDisplay">1</span></span>
</div>
<div class="xp-bar-bg">
<div class="xp-bar-fill" id="xpFill"></div>
<div class="xp-text"><span id="xpText">0/100 XP</span></div>
</div>
</div>
<div class="stat-box">
<div class="stat-row"><span>üíÄ –£–±–∏—Ç–æ –≤—Ä–∞–≥–æ–≤:</span> <span id="statKills">0</span></div>
<div class="stat-row"><span>üëÜ –í—Å–µ–≥–æ –∫–ª–∏–∫–æ–≤:</span> <span id="statClicks">0</span></div>
<div class="stat-row"><span>üèÜ –ü—Ä–µ—Å—Ç–∏–∂:</span> <span id="statPrestige">0</span></div>
<div class="stat-row"><span>üìÖ –î–µ–Ω—å:</span> <span id="statDay">1</span></div>
<div class="stat-row"><span>üî• –°–µ—Ä–∏—è –≤—Ö–æ–¥–æ–≤:</span> <span id="statStreak">0</span>/7</div>
<div class="stat-row"><span>üéØ –ö—Ä–∏—Ç–æ–≤:</span> <span id="statCrits">0</span></div>
<div class="stat-row"><span>üí∞ –í—Å–µ–≥–æ –∑–æ–ª–æ—Ç–∞:</span> <span id="statTotalGold">0</span></div>
<div class="stat-row"><span>üíé –ü—Ä–æ–º–æ –∞–ª–º–∞–∑—ã:</span> <span id="statDiamonds">0</span></div>
<div class="stat-row"><span>üé∞ –ü—Ä–æ–∫—Ä—É—Ç–æ–∫ —Ä—É–ª–µ—Ç–∫–∏:</span> <span id="statRoulette">0</span></div>
</div>
<h3 style="margin: 20px 0 10px; text-align: center;">üèÜ –î–æ—Å—Ç–∏–∂–µ–Ω–∏—è</h3>
<div id="achievementsList"></div>
<button class="btn-buy" style="width:100%; margin-top:10px; background:#ff9800; padding: 15px;" onclick="doPrestige()">
üîÑ –ü–†–ï–°–¢–ò–ñ (—Å–æ—Ö—Ä–∞–Ω—è–µ—Ç –±–æ–Ω—É—Å—ã)
</button>
<p style="font-size:11px; color:#888; margin-top:10px; text-align:center;">
+10% –∫ —É—Ä–æ–Ω—É –∑–∞ –∫–∞–∂–¥–æ–µ –æ—á–∫–æ –ø—Ä–µ—Å—Ç–∏–∂–∞
</p>
</div>

<div id="screen-promo" class="screen">
<h2 style="margin: 20px 0; text-align: center;">üéÅ –ü—Ä–æ–º–æ –∫–æ–¥—ã</h2>
<div class="promo-input-container">
<input type="text" class="promo-input" id="promoCodeInput" placeholder="–í–≤–µ–¥–∏—Ç–µ –ø—Ä–æ–º–æ –∫–æ–¥">
<button class="btn-promo" onclick="activatePromoCode()">–ê–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å</button>
</div>
<h3 style="margin: 20px 0 10px; text-align: center; color: var(--purple);">üíé –ü—Ä–æ–º–æ –º–∞–≥–∞–∑–∏–Ω</h3>
<div class="promo-shop-item">
<div>
<div style="font-weight: bold;">üí∞ 1000 –ó–æ–ª–æ—Ç–∞</div>
<small style="color:#888">–ú–≥–Ω–æ–≤–µ–Ω–Ω–æ–µ –ø–æ–ª—É—á–µ–Ω–∏–µ</small>
</div>
<button class="btn-promo-buy" onclick="buyPromoItem('gold1000')">
5 üíé
</button>
</div>
<div class="promo-shop-item">
<div>
<div style="font-weight: bold;">üí∞ 5000 –ó–æ–ª–æ—Ç–∞</div>
<small style="color:#888">–ú–≥–Ω–æ–≤–µ–Ω–Ω–æ–µ –ø–æ–ª—É—á–µ–Ω–∏–µ</small>
</div>
<button class="btn-promo-buy" onclick="buyPromoItem('gold5000')">
20 üíé
</button>
</div>
<div class="promo-shop-item">
<div>
<div style="font-weight: bold;">‚ö° –ü–æ–ª–Ω–∞—è —ç–Ω–µ—Ä–≥–∏—è</div>
<small style="color:#888">–í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ —ç–Ω–µ—Ä–≥–∏–∏</small>
</div>
<button class="btn-promo-buy" onclick="buyPromoItem('energy')">
3 üíé
</button>
</div>
<div class="promo-shop-item">
<div>
<div style="font-weight: bold;">‚öîÔ∏è –£—Ä–æ–Ω +5</div>
<small style="color:#888">–ü–æ—Å—Ç–æ—è–Ω–Ω–æ–µ —É–ª—É—á—à–µ–Ω–∏–µ</small>
</div>
<button class="btn-promo-buy" onclick="buyPromoItem('damage5')">
10 üíé
</button>
</div>
<div class="promo-shop-item">
<div>
<div style="font-weight: bold;">üéØ –ö—Ä–∏—Ç +5%</div>
<small style="color:#888">–ü–æ—Å—Ç–æ—è–Ω–Ω–æ–µ —É–ª—É—á—à–µ–Ω–∏–µ</small>
</div>
<button class="btn-promo-buy" onclick="buyPromoItem('crit5')">
15 üíé
</button>
</div>
<div class="promo-shop-item">
<div>
<div style="font-weight: bold;">üí• –ö—Ä–∏—Ç.–£—Ä–æ–Ω +50%</div>
<small style="color:#888">–ü–æ—Å—Ç–æ—è–Ω–Ω–æ–µ —É–ª—É—á—à–µ–Ω–∏–µ</small>
</div>
<button class="btn-promo-buy" onclick="buyPromoItem('critDmg50')">
25 üíé
</button>
</div>
<div class="promo-shop-item">
<div>
<div style="font-weight: bold;">ü§ñ –ê–≤—Ç–æ-–∫–ª–∏–∫ (–Ω–∞–≤—Å–µ–≥–¥–∞)</div>
<small style="color:#888">–ï–¥–∏–Ω–æ—Ä–∞–∑–æ–≤–∞—è –ø–æ–∫—É–ø–∫–∞</small>
</div>
<button class="btn-promo-buy" id="btnAutoClick" onclick="buyPromoItem('autoclick')">
100 üíé
</button>
</div>
<div class="promo-shop-item">
<div>
<div style="font-weight: bold;">‚ö° –ê–≤—Ç–æ-–ø–æ–∫—É–ø–∫–∞ —ç–Ω–µ—Ä–≥–∏–∏</div>
<small style="color:#888">–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞ –∑–æ–ª–æ—Ç–æ</small>
</div>
<button class="btn-promo-buy" id="btnAutoEnergy" onclick="buyPromoItem('autoenergy')">
50 üíé
</button>
</div>
</div>

<div id="screen-roulette" class="screen">
<h2 style="margin: 20px 0; text-align: center;">üé∞ –ö–∞–∑–∏–Ω–æ –£–¥–∞—á–∏</h2>
<div class="roulette-container">
<div class="free-spin-info" id="freeSpinInfo">
üéÅ –ë–µ—Å–ø–ª–∞—Ç–Ω—ã–π —Å–ø–∏–Ω –¥–æ—Å—Ç—É–ø–µ–Ω!
</div>
<div class="roulette-cost">–°—Ç–æ–∏–º–æ—Å—Ç—å: 3 üíé –∑–∞ –ø—Ä–æ–∫—Ä—É—Ç–∫—É</div>
<div class="slot-machine">
<div class="slot-reel" id="reel1">üçí</div>
<div class="slot-reel" id="reel2">üçí</div>
<div class="slot-reel" id="reel3">üçí</div>
</div>
<div class="roulette-result" id="rouletteResult">–ò—Å–ø—ã—Ç–∞–π —É–¥–∞—á—É!</div>
<button class="roulette-btn" id="rouletteBtn" onclick="spinRoulette()">üé∞ –ö—Ä—É—Ç–∏—Ç—å!</button>
<div class="roulette-prizes">
<h4>üèÜ –®–∞–Ω—Å—ã –≤—ã–∏–≥—Ä—ã—à–∞:</h4>
<p>üí∞ –ó–æ–ª–æ—Ç–æ = 50% (–í—ã—Å–æ–∫–∏–π)</p>
<p>‚öîÔ∏è –£–ª—É—á—à–µ–Ω–∏–µ = 25% (–°—Ä–µ–¥–Ω–∏–π)</p>
<p>üí∞üíé –ó–æ–ª–æ—Ç–æ + –ê–ª–º–∞–∑—ã = 20% (–ù–∏–∑–∫–∏–π)</p>
<p>üéâ –î–ñ–ï–ö–ü–û–¢ = 5% (–°—É–ø–µ—Ä –Ω–∏–∑–∫–∏–π)</p>
</div>
</div>
</div>

<div id="screen-dev" class="screen">
<h2 style="margin: 20px 0; text-align: center; color: var(--dev-accent);">üîß –ú–µ–Ω—é —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞</h2>
<div class="dev-section">
<h3>üë§ –í—ã–±–æ—Ä –ø–µ—Ä—Å–æ–Ω–∞–∂–∞</h3>
<div class="char-select-grid" id="devCharSelect"></div>
</div>
<div class="dev-section">
<h3>üí∞ –î–æ–±–∞–≤–∏—Ç—å –∑–æ–ª–æ—Ç–æ</h3>
<input type="number" class="dev-input" id="devGoldInput" placeholder="–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–æ–ª–æ—Ç–∞">
<button class="btn-dev" onclick="devAddGold()" style="margin-top: 10px;">–î–æ–±–∞–≤–∏—Ç—å</button>
</div>
<div class="dev-section">
<h3>üíé –î–æ–±–∞–≤–∏—Ç—å –∞–ª–º–∞–∑—ã</h3>
<input type="number" class="dev-input" id="devDiamondInput" placeholder="–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∞–ª–º–∞–∑–æ–≤">
<button class="btn-dev" onclick="devAddDiamonds()" style="margin-top: 10px;">–î–æ–±–∞–≤–∏—Ç—å</button>
</div>
<div class="dev-section">
<h3>‚ò†Ô∏è –°–±—Ä–æ—Å –ø—Ä–æ–≥—Ä–µ—Å—Å–∞</h3>
<button class="btn-reset" onclick="confirmReset()" style="margin-top: 10px;">‚ò†Ô∏è –°–ë–†–û–°–ò–¢–¨ –ü–†–û–ì–†–ï–°–°</button>
<p style="font-size:11px; color:#888; margin-top:10px;">–ü–æ–ª–Ω–æ—Å—Ç—å—é —Å–±—Ä–∞—Å—ã–≤–∞–µ—Ç –≤–µ—Å—å –ø—Ä–æ–≥—Ä–µ—Å—Å –∏–≥—Ä—ã</p>
</div>
<button class="btn-reset" onclick="closeDevMenu()" style="margin-top: 20px;">
üîí –ó–∞–∫—Ä—ã—Ç—å –º–µ–Ω—é
</button>
</div>

<div class="bottom-nav">
<button class="nav-btn active" onclick="switchScreen('battle', this)">
<span class="nav-icon">‚öîÔ∏è</span>
<span>–ë–æ–π</span>
</button>
<button class="nav-btn" onclick="switchScreen('shop', this)">
<span class="nav-icon">üõí</span>
<span>–ú–∞–≥–∞–∑–∏–Ω</span>
</button>
<button class="nav-btn" onclick="switchScreen('promo', this)">
<span class="nav-icon">üéÅ</span>
<span>–ü—Ä–æ–º–æ</span>
</button>
<button class="nav-btn" onclick="switchScreen('roulette', this)">
<span class="nav-icon">üé∞</span>
<span>–ö–∞–∑–∏–Ω–æ</span>
</button>
<button class="nav-btn" onclick="switchScreen('profile', this)">
<span class="nav-icon">üë§</span>
<span>–ü—Ä–æ—Ñ–∏–ª—å</span>
</button>
</div>

<div class="top-bar">
<div class="currency-display">
<div class="gold-display">üí∞ <span id="uiGold">500</span></div>
<div class="diamond-display">üíé <span id="uiDiamonds">0</span></div>
</div>
<div class="energy-container">
<div class="energy-bar-bg">
<div class="energy-bar-fill" id="energyFill"></div>
<div class="energy-text"><span id="uiEnergy">100/100</span></div>
</div>
</div>
<div class="xp-display">‚≠ê <span id="uiLevel">1</span></div>
<button class="dev-btn" onclick="openDevMenu()">‚öôÔ∏è</button>
</div>

<div class="modal" id="devPasswordModal" onclick="if(event.target===this) this.style.display='none'">
<div class="modal-content" style="border-color: var(--dev-accent);">
<h2 style="color: var(--dev-accent); margin-bottom: 15px;">üîê –ú–µ–Ω—é —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞</h2>
<p style="color: #ccc; margin-bottom: 20px;">–í–≤–µ–¥–∏—Ç–µ –ø–∞—Ä–æ–ª—å –¥–ª—è –¥–æ—Å—Ç—É–ø–∞</p>
<input type="password" class="promo-input" id="devPasswordInput" placeholder="–ü–∞—Ä–æ–ª—å" style="width: 100%;">
<div class="modal-buttons">
<button class="modal-btn cancel" onclick="closeDevPasswordModal()">–û—Ç–º–µ–Ω–∞</button>
<button class="modal-btn confirm" style="background: var(--dev-accent);" onclick="checkDevPassword()">–í–æ–π—Ç–∏</button>
</div>
</div>
</div>

<div class="prestige-chapter-modal" id="prestigeChapterModal">
<div class="prestige-chapter-content">
<div class="prestige-chapter-title">üèÜ –ì–õ–ê–í–ê 1 –ü–†–û–ô–î–ï–ù–ê!</div>
<div class="prestige-chapter-subtitle">üîÑ –°–ë–†–û–°–ò–¢–¨ –ß–ï–†–ï–ó –ü–†–ï–°–¢–ò–ñ?</div>
<div class="prestige-chapter-text">
–ü–æ–∑–¥—Ä–∞–≤–ª—è–µ–º! –í—ã –ø–æ–±–µ–¥–∏–ª–∏ –†—ã—Å—å –∏ –∑–∞–≤–µ—Ä—à–∏–ª–∏ –ø–µ—Ä–≤—É—é –≥–ª–∞–≤—É!<br><br>
–•–æ—Ç–∏—Ç–µ —Å–±—Ä–æ—Å–∏—Ç—å –ø—Ä–æ–≥—Ä–µ—Å—Å —á–µ—Ä–µ–∑ –ø—Ä–µ—Å—Ç–∏–∂ –∏ –ø–æ–ª—É—á–∏—Ç—å –±–æ–Ω—É—Å—ã –∫ —É—Ä–æ–Ω—É?
</div>
<div class="prestige-chapter-buttons">
<button class="prestige-chapter-btn later" onclick="closePrestigeChapterModal()">–ü–æ–∑–∂–µ</button>
<button class="prestige-chapter-btn prestige" onclick="doPrestigeFromModal()">üîÑ –ü—Ä–µ—Å—Ç–∏–∂</button>
</div>
</div>
</div>

<div id="toast" class="toast">–°–æ–æ–±—â–µ–Ω–∏–µ</div>

<script>
// ================= –ö–û–ù–§–ò–ì–£–†–ê–¶–ò–Ø –ü–ï–†–°–û–ù–ê–ñ–ï–ô =================
const CHARACTERS = {
shin: { name: '–®–∏–Ω', hp: 3000, img: 'images/shin.png', bgImg: 'backgrounds/shin.jpg', desc: '–Ø –®–ò–ù –ø–µ—Ä–≤—ã–π —Ç–µ–ª–æ—Ö—Ä–∞–Ω–∏—Ç–µ–ª—å –†—ã—Å–∏.', achievementId: 1, order: 1, rounds: 2 },
brick: { name: '–ö–∏—Ä–ø–∏—á', hp: 8000, img: 'images/brick.png', bgImg: 'backgrounds/brick.jpg', desc: '–Ø –ö–ò–†–ü–ò–ß –≤—Ç–æ—Ä–æ–π —Ç–µ–ª–æ—Ö—Ä–∞–Ω–∏—Ç–µ–ª—å –†—ã—Å–∏.', achievementId: 2, order: 2, rounds: 2 },
needle: { name: '–ò–≥–ª–∞', hp: 18000, img: 'images/needle.png', bgImg: 'backgrounds/needle.jpg', desc: '–Ø –ò–ì–õ–ê —Ç—Ä–µ—Ç–∏–π —Ç–µ–ª–æ—Ö—Ä–∞–Ω–∏—Ç–µ–ª—å –†—ã—Å–∏.', achievementId: 3, order: 3, rounds: 2 },
ghost: { name: '–ü—Ä–∏–∑—Ä–∞–∫', hp: 35000, img: 'images/ghost.png', bgImg: 'backgrounds/ghost.jpg', desc: '–Ø –ü–†–ò–ó–†–ê–ö, —á–µ—Ç–≤–µ—Ä—Ç—ã–π —Ç–µ–ª–æ—Ö—Ä–∞–Ω–∏—Ç–µ–ª—å.', achievementId: 4, order: 4, rounds: 2 },
dandy: { name: '–©—ë–≥–æ–ª—å', hp: 60000, img: 'images/dandy.png', bgImg: 'backgrounds/dandy.jpg', desc: '–Ø –©–ï–ì–û–õ–¨, –ø—è—Ç—ã–π —Ç–µ–ª–æ—Ö—Ä–∞–Ω–∏—Ç–µ–ª—å.', achievementId: 5, order: 5, rounds: 2 },
lynx: { name: '–†—ã—Å—å', hp: 200000, img: 'images/lynx.png', bgImg: 'backgrounds/lynx.jpg', desc: '–Ø –†–´–°–¨ –≥–ª–∞–≤–∞ –û—Ä–¥–µ–Ω–∞ –∞—Å—Å–∞—Å–∏–Ω–æ–≤.', achievementId: 6, isBoss: true, order: 6, rounds: 3 }
};
const CHARACTER_ORDER = ['shin', 'brick', 'needle', 'ghost', 'dandy', 'lynx'];

let promoCodes = {
'START2026': { gold: 1000, promo: 3, used: false, activations: 0 },
'WELCOME': { gold: 1000, promo: 3, used: false, activations: 0 },
'FIGHT298': { gold: 5000, promo: 5, used: false, activations: 0 },
'BLACK13': { gold: 1000, promo: 1, used: false, activations: 0 },
'SHIN99': { gold: 3000, promo: 4, used: false, activations: 0 },
'TIKTOK202620': { gold: 500, promo: 1, used: false, activations: 0 },
'CLIK100': { gold: 4000, promo: 4, used: false, activations: 0 },
'SHADOW1245': { gold: 7000, promo: 6, used: false, activations: 0 },
'100LV': { gold: 10000, promo: 10, used: false, activations: 0 },
'ZXC90': { gold: 2500, promo: 2, used: false, activations: 0 },
'NEWYEAR2000': { gold: 15000, promo: 15, used: false, activations: 0 },
'LEGEND': { gold: 20000, promo: 20, used: false, activations: 0 },
'VIP202': { gold: 5000, promo: 25, used: false, activations: 0 },
'FREEGOLD': { gold: 3000, promo: 0, used: false, activations: 0 },
'POWERUP': { gold: 1000, promo: 5, used: false, activations: 0 }
};

let adSlots = [
{ id: 1, imageUrl: '', videoUrl: '', linkUrl: '', text: '–°–º–æ—Ç—Ä–∏—Ç–µ —Ä–µ–∫–ª–∞–º—É –∏ –ø–æ–ª—É—á–∏—Ç–µ –∑–æ–ª–æ—Ç–æ!', reward: 500, timer: 10, views: 0 }
];

let stats = { totalAdViews: 0, totalPromoActivations: 0 };
let currentAdSlot = 0;
let gameVersion = 'V1.0.03';

const RANKS = [
{ level: 1, name: '–ù–æ–≤–∏—á–æ–∫', xpRequired: 100 },
{ level: 2, name: '–£—á–µ–Ω–∏–∫', xpRequired: 250 },
{ level: 3, name: '–ë–æ–µ—Ü', xpRequired: 500 },
{ level: 4, name: '–í–æ–∏–Ω', xpRequired: 1000 },
{ level: 5, name: '–í–µ—Ç–µ—Ä–∞–Ω', xpRequired: 2000 },
{ level: 6, name: '–ú–∞—Å—Ç–µ—Ä', xpRequired: 4000 },
{ level: 7, name: '–≠–∫—Å–ø–µ—Ä—Ç', xpRequired: 7000 },
{ level: 8, name: '–õ–µ–≥–µ–Ω–¥–∞', xpRequired: 11000 },
{ level: 9, name: '–ì–µ—Ä–æ–π', xpRequired: 16000 },
{ level: 10, name: '–ß–µ–º–ø–∏–æ–Ω', xpRequired: 22000 },
{ level: 11, name: '–¢–µ–Ω—å', xpRequired: 30000 },
{ level: 12, name: '–ë–æ–≥ –í–æ–π–Ω—ã', xpRequired: 50000 }
];

const ACHIEVEMENTS = [
{ id: 1, name: '–ü–æ–±–µ–¥–∞ –Ω–∞–¥ –®–∏–Ω–æ–º', desc: '–ü–æ–±–µ–¥–∏—Ç–µ –®–∏–Ω–∞', reward: 100, diamondReward: 1, current: 0, required: 1 },
{ id: 2, name: '–ì—Ä–æ–º–∏–ª–∞ –ø–æ–≤–µ—Ä–∂–µ–Ω', desc: '–ü–æ–±–µ–¥–∏—Ç–µ –ö–∏—Ä–ø–∏—á–∞', reward: 250, diamondReward: 1, current: 0, required: 1 },
{ id: 3, name: '–û—Å—Ç—Ä–∞—è –ø–æ–±–µ–¥–∞', desc: '–ü–æ–±–µ–¥–∏—Ç–µ –ò–≥–ª—É', reward: 500, diamondReward: 1, current: 0, required: 1 },
{ id: 4, name: '–û—Ö–æ—Ç–Ω–∏–∫ –Ω–∞ –ø—Ä–∏–∑—Ä–∞–∫–æ–≤', desc: '–ü–æ–±–µ–¥–∏—Ç–µ –ü—Ä–∏–∑—Ä–∞–∫–∞', reward: 1000, diamondReward: 1, current: 0, required: 1 },
{ id: 5, name: '–ú–æ–¥–Ω—ã–π –ø–æ–±–µ–¥–∏—Ç–µ–ª—å', desc: '–ü–æ–±–µ–¥–∏—Ç–µ –©—ë–≥–æ–ª—è', reward: 2000, diamondReward: 1, current: 0, required: 1 },
{ id: 6, name: '–õ–ï–ì–ï–ù–î–ê', desc: '–ü–æ–±–µ–¥–∏—Ç–µ –†—ã—Å—å', reward: 10000, diamondReward: 1, current: 0, required: 1 },
{ id: 7, name: '–ù–æ–≤–∏—á–æ–∫', desc: '100 –∫–ª–∏–∫–æ–≤', reward: 50, diamondReward: 1, current: 0, required: 100 },
{ id: 8, name: '–í–æ–∏–Ω', desc: '1000 –∫–ª–∏–∫–æ–≤', reward: 200, diamondReward: 1, current: 0, required: 1000 },
{ id: 9, name: '–ë–æ–≥–∞—á', desc: '10000 –∑–æ–ª–æ—Ç–∞', reward: 500, diamondReward: 1, current: 0, required: 10000 },
{ id: 10, name: '–ì–ª–∞–≤–∞ 1', desc: '–ü—Ä–æ–π–¥–∏—Ç–µ –≥–ª–∞–≤—É 1', reward: 5000, diamondReward: 1, current: 0, required: 1 },
{ id: 11, name: '–ö–æ–ª–ª–µ–∫—Ü–∏–æ–Ω–µ—Ä', desc: '100000 –∑–æ–ª–æ—Ç–∞', reward: 10000, diamondReward: 1, current: 0, required: 100000 },
{ id: 12, name: '–ê–ª–º–∞–∑–Ω—ã–π –º–∞–≥–Ω–∞—Ç', desc: '100 –∞–ª–º–∞–∑–æ–≤', reward: 5000, diamondReward: 1, current: 0, required: 100 },
{ id: 13, name: '–ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–π —É–¥–∞—Ä', desc: '100 –∫—Ä–∏—Ç–æ–≤', reward: 1000, diamondReward: 1, current: 0, required: 100 },
{ id: 14, name: '–ù–µ–ø–æ–±–µ–¥–∏–º—ã–π', desc: '50 –ø–æ–±–µ–¥', reward: 5000, diamondReward: 1, current: 0, required: 50 },
{ id: 15, name: '–£—Ä–æ–≤–µ–Ω—å 10', desc: '–î–æ—Å—Ç–∏–≥–Ω–∏—Ç–µ 10 —É—Ä–æ–≤–Ω—è', reward: 10000, diamondReward: 1, current: 0, required: 10 },
{ id: 16, name: '–†–µ–∫–ª–∞–º–Ω—ã–π –º–∞–≥–Ω–∞—Ç', desc: '50 –ø—Ä–æ—Å–º–æ—Ç—Ä–æ–≤ —Ä–µ–∫–ª–∞–º—ã', reward: 5000, diamondReward: 1, current: 0, required: 50 },
{ id: 17, name: '–†—É–ª–µ—Ç–æ—á–Ω–∏–∫', desc: '25 –ø—Ä–æ–∫—Ä—É—Ç–æ–∫ —Ä—É–ª–µ—Ç–∫–∏', reward: 3000, diamondReward: 1, current: 0, required: 25 },
{ id: 18, name: '–°–µ—Ä–∏–π–Ω—ã–π –±–æ–µ—Ü', desc: '7 –¥–Ω–µ–π –ø–æ–¥—Ä—è–¥', reward: 7000, diamondReward: 1, current: 0, required: 7 },
{ id: 19, name: '–ü–µ—Ä–≤–æ–ø—Ä–æ—Ö–æ–¥–µ—Ü', desc: '–ü–µ—Ä–≤–æ–µ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–µ', reward: 100, diamondReward: 1, current: 0, required: 1 }
];

const DAILY_REWARDS = [
{ day: 1, gold: 100, promo: 1, text: 'üéÅ –î–µ–Ω—å 1: +100 üí∞ +1 üíé' },
{ day: 2, gold: 200, promo: 2, text: 'üéÅ –î–µ–Ω—å 2: +200 üí∞ +2 üíé' },
{ day: 3, gold: 300, promo: 3, text: 'üéÅ –î–µ–Ω—å 3: +300 üí∞ +3 üíé' },
{ day: 4, gold: 500, promo: 5, text: 'üéÅ –î–µ–Ω—å 4: +500 üí∞ +5 üíé' },
{ day: 5, gold: 750, promo: 7, text: 'üéÅ –î–µ–Ω—å 5: +750 üí∞ +7 üíé' },
{ day: 6, gold: 1000, promo: 10, text: 'üéÅ –î–µ–Ω—å 6: +1000 üí∞ +10 üíé' },
{ day: 7, gold: 2000, promo: 20, text: 'üèÜ –î–µ–Ω—å 7: +2000 üí∞ +20 üíé –ë–û–ù–£–°!' }
];

const tg = window.Telegram.WebApp;
if(tg && tg.ready) tg.expand();

let game = {
gold: 500, totalGold: 0, promoCurrency: 0, damage: 1, critChance: 5, critDamage: 200,
energy: 100, maxEnergy: 100, prestige: 0, clicks: 0, totalCrits: 0, day: 1,
lastLogin: null, lastSave: null, achievements: [], chapter1Complete: false, usedPromoCodes: [],
costs: { damage: 15, critChance: 75, critDamage: 150, maxEnergy: 300 },
currentEnemy: 'shin', enemyHp: 3000, musicOn: true, soundOn: true,
loginStreak: 0, lastLoginDate: null, claimedDaily: [],
xp: 0, level: 1, totalWins: 0, rouletteSpins: 0,
currentRound: 1, maxRounds: 2, enemyMaxHp: 3000,
totalPlayTime: 0,
autoClick: false,
autoEnergy: false,
freeSpinAvailable: true,
lastFreeSpin: null
};

let autoSaveInterval, energyRegenInterval, adTimerInterval, adTimeLeft = 0;
let rouletteSpinning = false;
let lastClickTime = 0;
const CLICK_DELAY = 150;
let autoClickInterval = null;

window.onload = function() {
showLoadingScreen();
};

function showLoadingScreen() {
const loadingBar = document.getElementById('loadingBar');
const loadingScreen = document.getElementById('loadingScreen');
let progress = 0;
const loadInterval = setInterval(() => {
progress += Math.random() * 15 + 5;
if (progress >= 100) {
progress = 100;
clearInterval(loadInterval);
setTimeout(() => {
loadingScreen.classList.add('hidden');
setTimeout(() => {
loadingScreen.style.display = 'none';
initGame();
}, 500);
}, 500);
}
loadingBar.style.width = progress + '%';
}, 200);
}

function initGame() {
loadGame();
checkDaily();
checkDailyLoginReward();
checkFreeSpin();
initAudio();
updateUI();
updateLoginLog();
renderDevCharSelect();
updateVersionBadge();
updatePromoShopButtons();
startAutoClicker();
autoSaveInterval = setInterval(() => { saveGame(true); }, 10000);
energyRegenInterval = setInterval(() => {
if(game.energy < game.maxEnergy) {
game.energy++;
if(game.energy > game.maxEnergy) game.energy = game.maxEnergy;
updateUI();
}
}, 60000);
setInterval(checkAchievements, 2000);
setInterval(updatePlayTime, 60000);
setInterval(autoEnergyPurchase, 5000);
const charContainer = document.getElementById('charContainer');
charContainer.addEventListener('touchstart', function(e) {
e.preventDefault();
handleAttack(e.touches[0].clientX, e.touches[0].clientY);
}, { passive: false });
charContainer.addEventListener('mousedown', function(e) {
handleAttack(e.clientX, e.clientY);
});
document.addEventListener('click', initAudio, { once: true });
window.addEventListener('beforeunload', () => { saveGame(true); });
}

function startAutoClicker() {
if (autoClickInterval) {
clearInterval(autoClickInterval);
}
if (game.autoClick) {
autoClickInterval = setInterval(() => {
if (game.energy > 0) {
handleAttack(window.innerWidth / 2, window.innerHeight / 2);
}
}, 1000);
}
}

function updatePlayTime() {
game.totalPlayTime++;
updateUI();
}

function updateLoginLog() {
const lastLoginEl = document.getElementById('lastLoginLog');
const playTimeEl = document.getElementById('playTimeLog');
if (game.lastLogin) {
const lastLogin = new Date(game.lastLogin);
lastLoginEl.textContent = `–ü–æ—Å–ª–µ–¥–Ω–∏–π –≤—Ö–æ–¥: ${lastLogin.toLocaleString('ru-RU')}`;
} else {
lastLoginEl.textContent = '–ü–æ—Å–ª–µ–¥–Ω–∏–π –≤—Ö–æ–¥: –ù–∏–∫–æ–≥–¥–∞';
}
const hours = Math.floor(game.totalPlayTime / 60);
const mins = game.totalPlayTime % 60;
playTimeEl.textContent = `–í—Ä–µ–º—è –≤ –∏–≥—Ä–µ: ${hours}—á ${mins}–º–∏–Ω`;
}

function checkFreeSpin() {
const now = Date.now();
const oneDay = 24 * 60 * 60 * 1000;
if (game.lastFreeSpin && (now - game.lastFreeSpin) >= oneDay) {
game.freeSpinAvailable = true;
}
const freeSpinInfo = document.getElementById('freeSpinInfo');
if (game.freeSpinAvailable) {
freeSpinInfo.style.display = 'block';
freeSpinInfo.innerHTML = 'üéÅ –ë–µ—Å–ø–ª–∞—Ç–Ω—ã–π —Å–ø–∏–Ω –¥–æ—Å—Ç—É–ø–µ–Ω!';
freeSpinInfo.style.background = 'linear-gradient(135deg, #4caf50, #45a049)';
} else if (game.lastFreeSpin) {
const timeLeft = oneDay - (now - game.lastFreeSpin);
const hours = Math.floor(timeLeft / (1000 * 60 * 60));
const minutes = Math.floor((timeLeft % (1000 * 60 * 60)) / (1000 * 60));
freeSpinInfo.style.display = 'block';
freeSpinInfo.innerHTML = `‚è≥ –ë–µ—Å–ø–ª–∞—Ç–Ω—ã–π —Å–ø–∏–Ω —á–µ—Ä–µ–∑: ${hours}—á ${minutes}–º–∏–Ω`;
freeSpinInfo.style.background = 'linear-gradient(135deg, #ff9800, #f57c00)';
} else {
freeSpinInfo.style.display = 'block';
freeSpinInfo.innerHTML = 'üéÅ –ë–µ—Å–ø–ª–∞—Ç–Ω—ã–π —Å–ø–∏–Ω –¥–æ—Å—Ç—É–ø–µ–Ω!';
}
}

function useFreeSpin() {
if (!game.freeSpinAvailable) {
return false;
}
game.freeSpinAvailable = false;
game.lastFreeSpin = Date.now();
checkFreeSpin();
saveGame();
return true;
}

function handleAttack(x, y) {
const now = Date.now();
if (now - lastClickTime < CLICK_DELAY) {
return;
}
lastClickTime = now;
if (game.energy <= 0) {
if (game.autoEnergy && game.gold >= 100) {
buyEnergy();
} else {
showToast('‚ö° –ù–µ—Ç —ç–Ω–µ—Ä–≥–∏–∏! –ö—É–ø–∏—Ç–µ –≤ –º–∞–≥–∞–∑–∏–Ω–µ');
}
return;
}
game.energy--;
game.clicks++;
playSound('clickSound');
const char = CHARACTERS[game.currentEnemy];
let dmg = game.damage * (1 + (game.prestige * 0.1));
let isCrit = Math.random() * 100 < game.critChance;
if (isCrit) {
dmg = Math.floor(dmg * (game.critDamage / 100));
game.totalCrits++;
showDamage(x, y, `CRIT ${dmg}!`, true);
playSound('critSound');
const img = document.getElementById('charImg');
img.classList.remove('hit', 'crit-hit');
void img.offsetWidth;
img.classList.add('crit-hit');
} else {
showDamage(x, y, dmg, false);
playSound('clickSound');
const img = document.getElementById('charImg');
img.classList.remove('hit', 'crit-hit');
void img.offsetWidth;
img.classList.add('hit');
}
game.enemyHp -= dmg;
if (game.enemyHp < 0) game.enemyHp = 0;
let goldGain = Math.floor(dmg / 3);
game.gold += goldGain;
game.totalGold += goldGain;
addXP(1);
updateAchievementProgress(7, game.clicks);
updateAchievementProgress(8, game.clicks);
updateAchievementProgress(9, game.totalGold);
updateAchievementProgress(11, game.totalGold);
updateAchievementProgress(13, game.totalCrits);
if (game.enemyHp <= 0) {
enemyDefeated();
}
updateUI();
}

function autoEnergyPurchase() {
if (game.autoEnergy && game.energy <= 10 && game.gold >= 100) {
buyEnergy();
showToast('‚ö° –ê–≤—Ç–æ-–ø–æ–∫—É–ø–∫–∞ —ç–Ω–µ—Ä–≥–∏–∏!');
}
}

function enemyDefeated() {
const char = CHARACTERS[game.currentEnemy];
let bonus = Math.floor(char.hp / 20);
game.gold += bonus;
game.totalGold += bonus;
showToast(`üíÄ ${char.name} –ø–æ–≤–µ—Ä–∂–µ–Ω! +${bonus} üí∞`);
if (!game.achievements.includes(char.achievementId)) {
game.achievements.push(char.achievementId);
const ach = ACHIEVEMENTS.find(a => a.id === char.achievementId);
if (ach) {
game.gold += ach.reward;
game.promoCurrency += ach.diamondReward;
showToast(`üèÜ ${ach.name}! +${ach.reward} üí∞ +${ach.diamondReward} üíé`);
updateAchievementProgress(char.achievementId, 1);
}
}
game.totalWins++;
updateAchievementProgress(14, game.totalWins);
setTimeout(() => {
showVictoryScreen(char.name);
}, 500);
}

function showVictoryScreen(enemyName) {
const victoryScreen = document.getElementById('victoryScreen');
const victoryEnemyName = document.getElementById('victoryEnemyName');
const victoryNextBtn = document.getElementById('victoryNextBtn');
victoryEnemyName.textContent = `${enemyName} –ø–æ–≤–µ—Ä–∂–µ–Ω`;
victoryScreen.classList.add('active');
// –ö–Ω–æ–ø–∫–∞ —É–∂–µ –µ—Å—Ç—å –≤ HTML, –ø—Ä–æ—Å—Ç–æ –ø–æ–∫–∞–∑—ã–≤–∞–µ–º —ç–∫—Ä–∞–Ω
}

function goToNextEnemy() {
document.getElementById('victoryScreen').classList.remove('active');
nextEnemy();
}

function nextEnemy() {
let currentIndex = CHARACTER_ORDER.indexOf(game.currentEnemy);
const char = CHARACTERS[game.currentEnemy];
// –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ —Å–ª–µ–¥—É—é—â–∏–π —Ä–∞—É–Ω–¥ –¢–û–ì–û –ñ–ï –ø–µ—Ä—Å–æ–Ω–∞–∂–∞
if (game.currentRound < char.rounds) {
game.currentRound++;
game.enemyHp = char.hp;
game.enemyMaxHp = char.hp;
updateRoundInfo();
updateCharacterDisplay();
updateUI();
saveGame();
showToast(`‚öîÔ∏è –†–∞—É–Ω–¥ ${game.currentRound} –∏–∑ ${char.rounds}`);
}
// –ü–µ—Ä–µ—Ö–æ–¥ –∫ –°–õ–ï–î–£–Æ–©–ï–ú–£ –ø–µ—Ä—Å–æ–Ω–∞–∂—É –ø–æ –ø–æ—Ä—è–¥–∫—É
else if (currentIndex < CHARACTER_ORDER.length - 1) {
const nextEnemyKey = CHARACTER_ORDER[currentIndex + 1];
const nextChar = CHARACTERS[nextEnemyKey];
game.currentEnemy = nextEnemyKey;
game.currentRound = 1;
game.maxRounds = nextChar.rounds;
game.enemyHp = nextChar.hp;
game.enemyMaxHp = nextChar.hp;
document.body.style.backgroundImage = `url('${nextChar.bgImg}')`;
updateRoundInfo();
updateCharacterDisplay();
showToast(`‚öîÔ∏è –ù–æ–≤—ã–π –ø—Ä–æ—Ç–∏–≤–Ω–∏–∫: ${nextChar.name}!`);
updateUI();
saveGame();
}
// –ì–ª–∞–≤–∞ –ø—Ä–æ–π–¥–µ–Ω–∞ - –ø–æ—Å–ª–µ –†—ã—Å–∏
else {
if (!game.chapter1Complete) {
game.chapter1Complete = true;
if (!game.achievements.includes(10)) {
game.achievements.push(10);
const ach = ACHIEVEMENTS.find(a => a.id === 10);
game.gold += ach.reward;
game.promoCurrency += ach.diamondReward;
updateAchievementProgress(10, 1);
setTimeout(() => {
document.getElementById('prestigeChapterModal').classList.add('active');
}, 1000);
}
}
showToast('üèÜ –ì–ª–∞–≤–∞ 1 –ø—Ä–æ–π–¥–µ–Ω–∞! –ó–∞–Ω–æ–≤–æ...');
setTimeout(() => {
game.currentEnemy = 'shin';
game.currentRound = 1;
game.maxRounds = 2;
game.enemyHp = CHARACTERS.shin.hp;
game.enemyMaxHp = CHARACTERS.shin.hp;
document.body.style.backgroundImage = `url('${CHARACTERS.shin.bgImg}')`;
updateCharacterDisplay();
updateUI();
}, 2000);
}
updateUI();
saveGame();
}

function updateRoundInfo() {
const char = CHARACTERS[game.currentEnemy];
document.getElementById('roundInfo').textContent = `–†–∞—É–Ω–¥ ${game.currentRound} –∏–∑ ${char.rounds}`;
}

function spinRoulette() {
if (rouletteSpinning) return;
let cost = 3;
let isFree = false;
if (game.freeSpinAvailable) {
if (!confirm('–ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –±–µ—Å–ø–ª–∞—Ç–Ω—ã–π —Å–ø–∏–Ω?')) {
if (game.promoCurrency < cost) {
showToast('‚ùå –ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –∞–ª–º–∞–∑–æ–≤! –ù—É–∂–Ω–æ 3 üíé');
return;
}
} else {
isFree = true;
useFreeSpin();
}
} else if (game.promoCurrency < cost) {
showToast('‚ùå –ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –∞–ª–º–∞–∑–æ–≤! –ù—É–∂–Ω–æ 3 üíé');
return;
}
if (!isFree) {
game.promoCurrency -= cost;
}
game.rouletteSpins++;
updateAchievementProgress(17, game.rouletteSpins);
rouletteSpinning = true;
document.getElementById('rouletteBtn').disabled = true;
const reels = [
document.getElementById('reel1'),
document.getElementById('reel2'),
document.getElementById('reel3')
];
reels.forEach(reel => reel.classList.add('spinning'));
let spinInterval = setInterval(() => {
reels.forEach(reel => {
reel.textContent = ['üçí', 'üçã', 'üçá', 'üíé', '7Ô∏è‚É£', '‚öîÔ∏è'][Math.floor(Math.random() * 6)];
});
}, 100);
setTimeout(() => {
clearInterval(spinInterval);
reels.forEach(reel => reel.classList.remove('spinning'));
const rand = Math.random() * 100;
let result;
if (rand < 50) {
result = 'gold';
} else if (rand < 75) {
result = 'upgrade';
} else if (rand < 95) {
result = 'gold_diamond';
} else {
result = 'jackpot';
}
const results = getResultByType(result);
reels[0].textContent = results[0];
reels[1].textContent = results[1];
reels[2].textContent = results[2];
checkWin(results, result);
rouletteSpinning = false;
document.getElementById('rouletteBtn').disabled = false;
updateUI();
saveGame();
}, 3000);
}

function getResultByType(type) {
switch(type) {
case 'gold':
return ['üçí', 'üçí', 'üçã'];
case 'upgrade':
return ['‚öîÔ∏è', '‚öîÔ∏è', 'üçá'];
case 'gold_diamond':
return ['üíé', 'üíé', 'üçá'];
case 'jackpot':
return ['7Ô∏è‚É£', '7Ô∏è‚É£', '7Ô∏è‚É£'];
default:
return ['üçí', 'üçã', 'üçá'];
}
}

function checkWin(results, resultType) {
const resultEl = document.getElementById('rouletteResult');
if (resultType === 'gold') {
const amount = Math.floor(Math.random() * 500) + 500;
game.gold += amount;
resultEl.textContent = `üí∞ –ó–æ–ª–æ—Ç–æ: +${amount} üí∞`;
} else if (resultType === 'upgrade') {
const upgrades = ['damage', 'critChance', 'critDamage', 'maxEnergy'];
const randomUpgrade = upgrades[Math.floor(Math.random() * upgrades.length)];
buyUpgrade(randomUpgrade, true);
resultEl.textContent = '‚öîÔ∏è –°–ª—É—á–∞–π–Ω–æ–µ —É–ª—É—á—à–µ–Ω–∏–µ!';
} else if (resultType === 'gold_diamond') {
const gold = Math.floor(Math.random() * 1000) + 1000;
const diamonds = Math.floor(Math.random() * 3) + 1;
game.gold += gold;
game.promoCurrency += diamonds;
resultEl.textContent = `üí∞üíé +${gold} üí∞ +${diamonds} üíé`;
} else if (resultType === 'jackpot') {
game.gold += 10000;
game.promoCurrency += 20;
resultEl.textContent = 'üéâ –î–ñ–ï–ö–ü–û–¢! +10000 üí∞ +20 üíé!';
}
addXP(10);
updateUI();
}

function buyEnergy() {
if (game.gold >= 100) {
game.gold -= 100;
game.energy = Math.min(game.energy + 50, game.maxEnergy);
showToast('‚ö° +50 –≠–Ω–µ—Ä–≥–∏–∏!');
playSound('clickSound');
updateUI();
saveGame();
} else {
showToast('‚ùå –ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –∑–æ–ª–æ—Ç–∞');
}
}

function updateCharacterDisplay() {
const char = CHARACTERS[game.currentEnemy];
document.getElementById('charImg').src = char.img;
document.getElementById('charDesc').textContent = char.desc;
document.getElementById('charImg').onerror = function() {
this.style.display = 'none';
const container = document.getElementById('charContainer');
container.style.background = 'rgba(0,0,0,0.6)';
container.style.border = '3px solid #fff';
container.innerHTML = `<div style="color:#fff; text-align:center; padding: 20px;"><div style="font-size: 24px; font-weight: bold;">${char.name}</div></div>`;
};
}

function buyUpgrade(type, free = false) {
let cost = game.costs[type];
if (free || game.gold >= cost) {
if (!free) game.gold -= cost;
if (type === 'damage') game.damage++;
if (type === 'critChance') game.critChance = Math.min(game.critChance + 1, 50);
if (type === 'critDamage') game.critDamage += 10;
if (type === 'maxEnergy') { game.maxEnergy += 10; game.energy = game.maxEnergy; }
if (!free) {
game.costs[type] = Math.floor(cost * 1.6);
}
showToast('‚úÖ –£–ª—É—á—à–µ–Ω–æ!');
playSound('clickSound');
updateUI();
saveGame();
} else {
showToast('‚ùå –ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –∑–æ–ª–æ—Ç–∞');
}
}

function activatePromoCode() {
const input = document.getElementById('promoCodeInput');
const code = input.value.trim().toUpperCase();
if (!code) { showToast('‚ùå –í–≤–µ–¥–∏—Ç–µ –∫–æ–¥!'); return; }
if (game.usedPromoCodes.includes(code)) { showToast('‚ùå –ö–æ–¥ —É–∂–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω!'); return; }
if (promoCodes[code]) {
const promo = promoCodes[code];
game.gold += promo.gold;
game.totalGold += promo.gold;
game.promoCurrency += promo.promo;
game.usedPromoCodes.push(code);
promo.activations++;
stats.totalPromoActivations++;
showToast(`üéÅ –ö–æ–¥ –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω! +${promo.gold} üí∞ +${promo.promo} üíé`);
playSound('winSound');
input.value = '';
updateUI();
saveGame();
} else {
showToast('‚ùå –ù–µ–≤–µ—Ä–Ω—ã–π –∫–æ–¥!');
}
}

function buyPromoItem(item) {
const items = {
'gold1000': { cost: 5, gold: 1000 },
'gold5000': { cost: 20, gold: 5000 },
'energy': { cost: 3, energy: 100 },
'damage5': { cost: 10, damage: 5 },
'crit5': { cost: 15, critChance: 5 },
'critDmg50': { cost: 25, critDamage: 50 },
'autoclick': { cost: 100, autoClick: true, oneTime: true },
'autoenergy': { cost: 50, autoEnergy: true, oneTime: true }
};
const purchase = items[item];
if (!purchase) return;
if (purchase.oneTime) {
if (purchase.autoClick && game.autoClick) {
showToast('‚ùå –£–∂–µ –∫—É–ø–ª–µ–Ω–æ!');
return;
}
if (purchase.autoEnergy && game.autoEnergy) {
showToast('‚ùå –£–∂–µ –∫—É–ø–ª–µ–Ω–æ!');
return;
}
}
if (game.promoCurrency >= purchase.cost) {
game.promoCurrency -= purchase.cost;
if (purchase.gold) { game.gold += purchase.gold; game.totalGold += purchase.gold; }
if (purchase.energy) { game.energy = game.maxEnergy; }
if (purchase.damage) { game.damage += purchase.damage; }
if (purchase.critChance) { game.critChance = Math.min(game.critChance + purchase.critChance, 50); }
if (purchase.critDamage) { game.critDamage += purchase.critDamage; }
if (purchase.autoClick) {
game.autoClick = true;
startAutoClicker();
}
if (purchase.autoEnergy) { game.autoEnergy = true; }
showToast('‚úÖ –ü–æ–∫—É–ø–∫–∞ —É—Å–ø–µ—à–Ω–∞!');
playSound('winSound');
updateUI();
updatePromoShopButtons();
saveGame();
} else {
showToast('‚ùå –ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –ø—Ä–æ–º–æ –≤–∞–ª—é—Ç—ã!');
}
}

function updatePromoShopButtons() {
const btnAutoClick = document.getElementById('btnAutoClick');
const btnAutoEnergy = document.getElementById('btnAutoEnergy');
if (btnAutoClick) {
if (game.autoClick) {
btnAutoClick.classList.add('purchased');
btnAutoClick.textContent = '–ö—É–ø–ª–µ–Ω–æ ‚úì';
btnAutoClick.disabled = true;
}
}
if (btnAutoEnergy) {
if (game.autoEnergy) {
btnAutoEnergy.classList.add('purchased');
btnAutoEnergy.textContent = '–ö—É–ø–ª–µ–Ω–æ ‚úì';
btnAutoEnergy.disabled = true;
}
}
}

function openDevMenu() { document.getElementById('devPasswordModal').style.display = 'flex'; }
function closeDevPasswordModal() { document.getElementById('devPasswordModal').style.display = 'none'; document.getElementById('devPasswordInput').value = ''; }
function checkDevPassword() {
const password = document.getElementById('devPasswordInput').value;
if (password === '159000a') {
closeDevPasswordModal();
switchScreen('dev', document.querySelectorAll('.nav-btn')[0]);
renderDevCharSelect();
showToast('üîß –ú–µ–Ω—é —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞ –æ—Ç–∫—Ä—ã—Ç–æ');
} else { showToast('‚ùå –ù–µ–≤–µ—Ä–Ω—ã–π –ø–∞—Ä–æ–ª—å!'); document.getElementById('devPasswordInput').value = ''; }
}
function closeDevMenu() { switchScreen('battle', document.querySelectorAll('.nav-btn')[0]); }
function renderDevCharSelect() {
const container = document.getElementById('devCharSelect');
container.innerHTML = '';
CHARACTER_ORDER.forEach(key => {
const char = CHARACTERS[key];
const btn = document.createElement('button');
btn.className = `char-select-btn ${game.currentEnemy === key ? 'active' : ''}`;
btn.textContent = char.name;
btn.onclick = () => devSelectCharacter(key);
container.appendChild(btn);
});
}
function devSelectCharacter(key) {
game.currentEnemy = key;
game.currentRound = 1;
game.enemyHp = CHARACTERS[key].hp;
game.enemyMaxHp = CHARACTERS[key].hp;
document.body.style.backgroundImage = `url('${CHARACTERS[key].bgImg}')`;
updateCharacterDisplay();
renderDevCharSelect();
updateUI();
showToast(`üë§ –ü–µ—Ä—Å–æ–Ω–∞–∂: ${CHARACTERS[key].name}`);
saveGame();
}
function devAddGold() {
const input = document.getElementById('devGoldInput');
const amount = parseInt(input.value);
if (amount > 0) {
game.gold += amount;
game.totalGold += amount;
showToast(`üí∞ –î–æ–±–∞–≤–ª–µ–Ω–æ ${amount} –∑–æ–ª–æ—Ç–∞`);
input.value = '';
updateUI();
saveGame();
}
}
function devAddDiamonds() {
const input = document.getElementById('devDiamondInput');
const amount = parseInt(input.value);
if (amount > 0) {
game.promoCurrency += amount;
showToast(`üíé –î–æ–±–∞–≤–ª–µ–Ω–æ ${amount} –∞–ª–º–∞–∑–æ–≤`);
input.value = '';
updateUI();
saveGame();
}
}
function addXP(amount) {
game.xp += amount;
const nextRank = RANKS.find(r => r.level === game.level + 1);
if (nextRank && game.xp >= nextRank.xpRequired) {
game.level++;
game.xp = 0;
showToast(`‚≠ê –£—Ä–æ–≤–µ–Ω—å –ø–æ–≤—ã—à–µ–Ω! –¢–µ–ø–µ—Ä—å –≤—ã ${RANKS.find(r => r.level === game.level)?.name || '–ë–æ–≥ –í–æ–π–Ω—ã'}!`);
playSound('winSound');
updateAchievementProgress(15, game.level);
}
updateUI();
saveGame();
}

function getRankName() {
const rank = RANKS.find(r => r.level === game.level);
return rank ? rank.name : '–ë–æ–≥ –í–æ–π–Ω—ã';
}

function getNextLevelXP() {
const rank = RANKS.find(r => r.level === game.level + 1);
return rank ? rank.xpRequired : 50000;
}

function updateAchievementProgress(id, value) {
const ach = ACHIEVEMENTS.find(a => a.id === id);
if (ach) {
ach.current = value;
}
}

function checkDailyLoginReward() {
const today = new Date().toISOString().split('T')[0];
const streakDay = Math.min(game.loginStreak, 7);
if (game.lastLoginDate !== today && !game.claimedDaily.includes(streakDay)) {
const reward = DAILY_REWARDS[streakDay - 1];
if (reward) {
game.gold += reward.gold;
game.totalGold += reward.gold;
game.promoCurrency += reward.promo;
game.claimedDaily.push(streakDay);
showToast(reward.text);
playSound('winSound');
updateUI();
saveGame();
}
}
}

function watchAd() {
if (typeof AdsGram !== 'undefined') {
AdsGram.showAd({
blockId: '23283',
onSuccess: function() {
const ad = adSlots[currentAdSlot];
game.gold += ad.reward;
game.totalGold += ad.reward;
ad.views++;
stats.totalAdViews++;
showToast(`üì∫ +${ad.reward} üí∞ –∑–∞ –ø—Ä–æ—Å–º–æ—Ç—Ä —Ä–µ–∫–ª–∞–º—ã!`);
playSound('winSound');
currentAdSlot = (currentAdSlot + 1) % 5;
updateAchievementProgress(16, stats.totalAdViews);
updateUI();
saveGame();
},
onError: function(error) {
console.log('Ad error:', error);
showToast('‚ùå –û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ —Ä–µ–∫–ª–∞–º—ã');
}
});
} else {
showToast('üß™ –¢–µ—Å—Ç–æ–≤–∞—è —Ä–µ–∫–ª–∞–º–∞ (–Ω–µ—Ç AdsGram)');
setTimeout(() => {
const ad = adSlots[currentAdSlot];
game.gold += ad.reward;
game.totalGold += ad.reward;
showToast(`üì∫ +${ad.reward} üí∞`);
currentAdSlot = (currentAdSlot + 1) % 5;
updateUI();
saveGame();
}, 3000);
}
}

function watchAdForDiamond() {
if (typeof AdsGram !== 'undefined') {
AdsGram.showAd({
blockId: '23283',
onSuccess: function() {
game.promoCurrency += 1;
stats.totalAdViews++;
showToast(`üì∫ +1 üíé –∑–∞ –ø—Ä–æ—Å–º–æ—Ç—Ä —Ä–µ–∫–ª–∞–º—ã!`);
playSound('winSound');
updateUI();
saveGame();
},
onError: function(error) {
console.log('Ad error:', error);
showToast('‚ùå –û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ —Ä–µ–∫–ª–∞–º—ã');
}
});
} else {
showToast('üß™ –¢–µ—Å—Ç–æ–≤–∞—è —Ä–µ–∫–ª–∞–º–∞ (–Ω–µ—Ç AdsGram)');
setTimeout(() => {
game.promoCurrency += 1;
showToast(`üì∫ +1 üíé`);
updateUI();
saveGame();
}, 3000);
}
}

function initAudio() {
const music = document.getElementById('bgMusic');
if (game.musicOn && music.paused) {
music.volume = 0.3;
music.play().catch(e => console.log('Audio autoplay blocked'));
}
}

function toggleMusic() {
game.musicOn = !game.musicOn;
const music = document.getElementById('bgMusic');
const btn = document.getElementById('musicBtn');
if (game.musicOn) { music.play(); btn.innerHTML = 'üéµ'; showToast('üéµ –ú—É–∑—ã–∫–∞ –≤–∫–ª—é—á–µ–Ω–∞'); }
else { music.pause(); btn.innerHTML = 'üîá'; showToast('üîá –ú—É–∑—ã–∫–∞ –≤—ã–∫–ª—é—á–µ–Ω–∞'); }
saveGame();
}

function toggleSound() {
game.soundOn = !game.soundOn;
const btn = document.getElementById('soundBtn');
btn.innerHTML = game.soundOn ? 'üîä' : 'üîá';
showToast(game.soundOn ? 'üîä –ó–≤—É–∫ –≤–∫–ª—é—á—ë–Ω' : 'üîá –ó–≤—É–∫ –≤—ã–∫–ª—é—á–µ–Ω');
saveGame();
}

function playSound(soundId) {
if (!game.soundOn) return;
const sound = document.getElementById(soundId);
if (sound) { sound.currentTime = 0; sound.volume = 0.5; sound.play().catch(e => {}); }
}

function checkAchievements() {
ACHIEVEMENTS.forEach((ach) => {
if (!game.achievements.includes(ach.id)) {
let unlocked = false;
if (ach.id === 7 && game.clicks >= 100) unlocked = true;
else if (ach.id === 8 && game.clicks >= 1000) unlocked = true;
else if (ach.id === 9 && game.totalGold >= 10000) unlocked = true;
else if (ach.id === 10 && game.chapter1Complete) unlocked = true;
else if (ach.id === 11 && game.totalGold >= 100000) unlocked = true;
else if (ach.id === 12 && game.promoCurrency >= 100) unlocked = true;
else if (ach.id === 13 && game.totalCrits >= 100) unlocked = true;
else if (ach.id === 14 && game.totalWins >= 50) unlocked = true;
else if (ach.id === 15 && game.level >= 10) unlocked = true;
else if (ach.id === 16 && stats.totalAdViews >= 50) unlocked = true;
else if (ach.id === 17 && game.rouletteSpins >= 25) unlocked = true;
else if (ach.id === 18 && game.loginStreak >= 7) unlocked = true;
else if (ach.id === 19 && game.achievements.length >= 1) unlocked = true;
if (unlocked) {
game.achievements.push(ach.id);
game.gold += ach.reward;
game.promoCurrency += ach.diamondReward;
game.totalGold += ach.reward;
showToast(`üèÜ ${ach.name}! +${ach.reward} üí∞ +${ach.diamondReward} üíé`);
playSound('winSound');
}
}
});
updateUI();
}

function checkDaily() {
const today = new Date().toDateString();
const todayISO = new Date().toISOString().split('T')[0];
if (game.lastLogin !== today) {
const yesterday = new Date();
yesterday.setDate(yesterday.getDate() - 1);
const yesterdayISO = yesterday.toISOString().split('T')[0];
if (game.lastLoginDate === yesterdayISO) {
game.loginStreak++;
} else if (game.lastLoginDate !== todayISO) {
game.loginStreak = 1;
}
game.day++;
game.lastLogin = today;
game.lastLoginDate = todayISO;
game.energy = game.maxEnergy;
showToast(`üìÖ –î–µ–Ω—å ${game.day}! –°–µ—Ä–∏—è –≤—Ö–æ–¥–æ–≤: ${game.loginStreak}/7`);
updateAchievementProgress(18, game.loginStreak);
saveGame();
}
}

function switchScreen(screenId, btn) {
document.querySelectorAll('.screen').forEach(s => s.classList.remove('active'));
document.getElementById('screen-' + screenId).classList.add('active');
document.querySelectorAll('.nav-btn').forEach(b => b.classList.remove('active'));
if(btn) btn.classList.add('active');
if (screenId === 'profile') {
renderAchievements();
updateLoginLog();
}
}

function updateUI() {
const char = CHARACTERS[game.currentEnemy];
document.getElementById('uiGold').innerText = Math.floor(game.gold);
document.getElementById('uiDiamonds').innerText = Math.floor(game.promoCurrency);
document.getElementById('uiLevel').innerText = game.level;
document.getElementById('uiEnergy').innerText = `${game.energy}/${game.maxEnergy}`;
let energyPct = (game.energy / game.maxEnergy) * 100;
document.getElementById('energyFill').style.width = energyPct + '%';
document.getElementById('enemyName').innerText = char.name + (char.isBoss ? ' (–ë–û–°–°)' : '');
updateRoundInfo();
let hpPct = (game.enemyHp / game.enemyMaxHp) * 100;
document.getElementById('hpFill').style.width = hpPct + '%';
document.getElementById('hpText').innerText = `${Math.ceil(game.enemyHp)}/${game.enemyMaxHp}`;
document.getElementById('shopDmg').innerText = game.damage;
document.getElementById('shopCrit').innerText = game.critChance;
document.getElementById('shopCritDmg').innerText = game.critDamage;
document.getElementById('shopEnergy').innerText = game.maxEnergy;
document.getElementById('costDmg').innerText = game.costs.damage;
document.getElementById('costCrit').innerText = game.costs.critChance;
document.getElementById('costCritDmg').innerText = game.costs.critDamage;
document.getElementById('costEnergy').innerText = game.costs.maxEnergy;
document.getElementById('btnBuyDmg').disabled = game.gold < game.costs.damage;
document.getElementById('btnBuyCrit').disabled = game.gold < game.costs.critChance;
document.getElementById('btnBuyCritDmg').disabled = game.gold < game.costs.critDamage;
document.getElementById('btnBuyEnergy').disabled = game.gold < game.costs.maxEnergy;
document.getElementById('statKills').innerText = game.achievements.filter(id => id <= 6).length;
document.getElementById('statClicks').innerText = game.clicks;
document.getElementById('statPrestige').innerText = game.prestige;
document.getElementById('statDay').innerText = game.day;
document.getElementById('statCrits').innerText = game.totalCrits;
document.getElementById('statTotalGold').innerText = Math.floor(game.totalGold);
document.getElementById('statStreak').innerText = Math.min(game.loginStreak, 7);
document.getElementById('statDiamonds').innerText = Math.floor(game.promoCurrency);
document.getElementById('statRoulette').innerText = game.rouletteSpins;
document.getElementById('rankBadge').innerText = getRankName();
document.getElementById('levelDisplay').innerText = game.level;
const nextLevelXP = getNextLevelXP();
const xpPct = (game.xp / nextLevelXP) * 100;
document.getElementById('xpFill').style.width = xpPct + '%';
document.getElementById('xpText').innerText = `${game.xp}/${nextLevelXP} XP`;
}

function renderAchievements() {
const list = document.getElementById('achievementsList');
list.innerHTML = '';
ACHIEVEMENTS.forEach(ach => {
const unlocked = game.achievements.includes(ach.id);
const progress = ach.required > 0 ? `${Math.min(ach.current, ach.required)}/${ach.required}` : '';
const percent = ach.required > 0 ? Math.round((ach.current / ach.required) * 100) : 0;
list.innerHTML += `<div class="achievement-item ${unlocked ? 'unlocked' : 'locked'}">
<div style="font-weight: bold; color: ${unlocked ? '#4caf50' : '#888'}">${unlocked ? '‚úÖ' : 'üîí'} ${ach.name}</div>
<div style="font-size: 12px; color: #aaa; margin-top: 5px;">${ach.desc} | ${ach.reward} üí∞ + ${ach.diamondReward} üíé</div>
${!unlocked && progress ? `<div class="achievement-progress">–ü—Ä–æ–≥—Ä–µ—Å—Å: ${progress} (${percent}%)</div>` : ''}
</div>`;
});
}

function showDamage(x, y, text, isCrit) {
const el = document.createElement('div');
el.className = `damage-popup ${isCrit ? 'crit' : ''}`;
el.innerText = text;
el.style.left = (x - 40) + 'px';
el.style.top = (y - 80) + 'px';
document.body.appendChild(el);
setTimeout(() => el.remove(), 1000);
}

function showToast(msg) {
const t = document.getElementById('toast');
t.innerText = msg;
t.classList.add('show');
setTimeout(() => t.classList.remove('show'), 2500);
}

function saveGame(showIndicator = false) {
game.lastSave = new Date().toISOString();
localStorage.setItem('sf2_chapter1', JSON.stringify(game));
localStorage.setItem('sf2_promoCodes', JSON.stringify(promoCodes));
localStorage.setItem('sf2_adSlots', JSON.stringify(adSlots));
localStorage.setItem('sf2_version', gameVersion);
localStorage.setItem('sf2_currentAdSlot', currentAdSlot);
localStorage.setItem('sf2_stats', JSON.stringify(stats));
if (showIndicator) {
const indicator = document.getElementById('saveIndicator');
indicator.classList.add('show');
setTimeout(() => indicator.classList.remove('show'), 2000);
}
}

function loadGame() {
const saved = localStorage.getItem('sf2_chapter1');
const savedPromo = localStorage.getItem('sf2_promoCodes');
const savedAdSlots = localStorage.getItem('sf2_adSlots');
const savedVersion = localStorage.getItem('sf2_version');
const savedCurrentAdSlot = localStorage.getItem('sf2_currentAdSlot');
const savedStats = localStorage.getItem('sf2_stats');
if (saved) { const parsed = JSON.parse(saved); game = { ...game, ...parsed }; }
if (savedPromo) promoCodes = { ...promoCodes, ...JSON.parse(savedPromo) };
if (savedAdSlots) adSlots = JSON.parse(savedAdSlots);
if (savedVersion) gameVersion = savedVersion;
if (savedCurrentAdSlot) currentAdSlot = parseInt(savedCurrentAdSlot);
if (savedStats) stats = JSON.parse(savedStats);
const char = CHARACTERS[game.currentEnemy];
if (char) {
document.body.style.backgroundImage = `url('${char.bgImg}')`;
updateCharacterDisplay();
game.enemyMaxHp = char.hp;
}
if (!game.musicOn) document.getElementById('musicBtn').innerHTML = 'üîá';
if (!game.soundOn) document.getElementById('soundBtn').innerHTML = 'üîá';
}

function updateVersionBadge() {
document.getElementById('versionBadge').textContent = `v${gameVersion}`;
}

function doPrestige() {
let points = Math.floor(game.clicks / 1000);
if (points < 1) points = 1;
if (confirm(`–ü—Ä–µ—Å—Ç–∏–∂: ${points} –æ—á–∫–æ–≤?
+${points * 10}% –∫ —É—Ä–æ–Ω—É –Ω–∞–≤—Å–µ–≥–¥–∞`)) {
game.prestige += points;
game.gold = 500;
game.damage = 1;
game.critChance = 5;
game.critDamage = 200;
game.maxEnergy = 100;
game.energy = 100;
game.currentEnemy = 'shin';
game.currentRound = 1;
game.enemyHp = CHARACTERS.shin.hp;
game.enemyMaxHp = CHARACTERS.shin.hp;
game.costs = { damage: 15, critChance: 75, critDamage: 150, maxEnergy: 300 };
document.body.style.backgroundImage = `url('${CHARACTERS.shin.bgImg}')`;
updateCharacterDisplay();
showToast(`üîÑ –ü—Ä–µ—Å—Ç–∏–∂! +${points} –æ—á–∫–æ–≤`);
playSound('winSound');
updateUI();
saveGame();
closePrestigeChapterModal();
}
}

function doPrestigeFromModal() {
doPrestige();
}

function closePrestigeChapterModal() {
document.getElementById('prestigeChapterModal').classList.remove('active');
}

function confirmReset() {
if (!confirm('‚ò†Ô∏è –í—ã —É–≤–µ—Ä–µ–Ω—ã? –í–µ—Å—å –ø—Ä–æ–≥—Ä–µ—Å—Å –±—É–¥–µ—Ç —É–¥–∞–ª—ë–Ω –±–µ–∑–≤–æ–∑–≤—Ä–∞—Ç–Ω–æ!')) return;
game = {
gold: 500, totalGold: 0, promoCurrency: 0, damage: 1, critChance: 5, critDamage: 200,
energy: 100, maxEnergy: 100, prestige: 0, clicks: 0, totalCrits: 0, day: 1,
lastLogin: null, lastSave: null, achievements: [], chapter1Complete: false, usedPromoCodes: [],
costs: { damage: 15, critChance: 75, critDamage: 150, maxEnergy: 300 },
currentEnemy: 'shin', enemyHp: 3000, enemyMaxHp: 3000, musicOn: game.musicOn, soundOn: game.soundOn,
loginStreak: 0, lastLoginDate: null, claimedDaily: [],
xp: 0, level: 1, totalWins: 0, rouletteSpins: 0,
currentRound: 1, maxRounds: 2,
totalPlayTime: 0,
autoClick: false,
autoEnergy: false,
freeSpinAvailable: true,
lastFreeSpin: null
};
stats = { totalAdViews: 0, totalPromoActivations: 0 };
adSlots.forEach(slot => { slot.views = 0; });
Object.values(promoCodes).forEach(code => { code.activations = 0; });
document.body.style.backgroundImage = `url('${CHARACTERS.shin.bgImg}')`;
updateCharacterDisplay();
showToast('‚ò†Ô∏è –ü—Ä–æ–≥—Ä–µ—Å—Å —Å–±—Ä–æ—à–µ–Ω!');
playSound('winSound');
updateUI();
saveGame();
}
</script>
</body>
</html>


